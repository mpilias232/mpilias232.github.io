(this.webpackJsonpadmintry=this.webpackJsonpadmintry||[]).push([[0],{1083:function(e,t,n){},1531:function(e,t,n){},1532:function(e,t,n){},1533:function(e,t,n){},1534:function(e,t,n){},1535:function(e,t,n){},1628:function(e,t){},1652:function(e,t){},1690:function(e,t){},1723:function(e,t,n){},1724:function(e,t,n){},1725:function(e,t,n){},1726:function(e,t,n){},1728:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(34),s=n.n(c),i=(n(1083),n(61)),o=n(812),l=n(770),u=n(983),j=n(981),d=n(14),b=n(110),O=n(48),f=n(544),x=n(810),h=n(811),m=n(147),p=n(318),g=n(795),v=n(797),y=n(511),w=n(125),k=n(798),C=n(35),S=(n(990),n(2)),F=(Object(C.a)({link:{textDecoration:"none"},icon:{width:"0.5em",paddingLeft:2}}),n(402)),D=n(327),T=n.n(D),I=function(e){return Object(S.jsx)(f.a,Object(O.a)({rowsPerPageOptions:[50,100,200]},e))},N=function(e){var t=Object(F.a)((function(e){return e.breakpoints.down("sm")}));return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({perPage:50},e),{},{pagination:Object(S.jsx)(I,{}),children:t?Object(S.jsx)(h.a,{primaryText:function(e){return e.name},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.phone}}):Object(S.jsxs)(T.a,{children:[Object(S.jsx)(m.a,{source:"name"}),Object(S.jsx)(p.a,{source:"email"}),Object(S.jsx)(m.a,{source:"phone"}),Object(S.jsx)(m.a,{source:"instagram"}),Object(S.jsx)(g.a,{})]})}))},M=function(e){var t=e.record;return Object(S.jsxs)("span",{children:["Client ",t?'"'.concat(t.name,'"'):""]})},P=function(e){return Object(S.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{children:Object(S.jsxs)(y.a,{children:[Object(S.jsx)(w.a,{source:"name",label:"Name"}),Object(S.jsx)(w.a,{source:"phone",label:"Phone"}),Object(S.jsx)(w.a,{source:"email",label:"Email"}),Object(S.jsx)(w.a,{source:"instagram",label:"Instagram"})]})}))},_=function(e){return Object(S.jsx)(k.a,Object(O.a)(Object(O.a)({title:Object(S.jsx)(M,{})},e),{},{children:Object(S.jsxs)(y.a,{children:[Object(S.jsx)(w.a,{source:"name",label:"Name"}),Object(S.jsx)(w.a,{source:"phone",label:"Phone"}),Object(S.jsx)(w.a,{source:"email",label:"Email"}),Object(S.jsx)(w.a,{source:"instagram",label:"Instagram"})]})}))},R=n(237),Y=n(807),z=n(516),B=n(388),A=n(978),V=n(808),E=n(809),L=n(320),W=n(802),Q=n(316),G=n(317),U=n(982),K=n(801),q=n(803),H=n(547),J=n(514),X=n(8),Z=n(730),$=n(731),ee=n(727),te=n.n(ee),ne=n(713),ae=n.n(ne),re=n(26),ce=n.n(re),se=n(85),ie=n(99),oe=n(565),le=n(689),ue=n(57),je=n(503),de=n(399),be=n.n(de),Oe=n(791),fe=n(792),xe=n(793),he=n(794),me=n(1731),pe=n(124),ge=n.n(pe),ve=n(726),ye=n(584),we=n.n(ye),ke=(n(1729),n(335)),Ce={apiKey:"AIzaSyAUqOhdFbfRiCRqSzxKpYeTppBGsHfAAug",authDomain:"admin-a4a00.firebaseapp.com",databaseURL:"https://admin-a4a00-default-rtdb.firebaseio.com",projectId:"admin-a4a00",storageBucket:"admin-a4a00.appspot.com",messagingSenderId:"328849622350",appId:"1:328849622350:web:cf2cd21a20f108e7aeca1f",measurementId:"G-YKBC2Q28P1"};we.a.initializeApp(Ce);var Se=we.a.messaging(),Fe=Object(ve.FirebaseDataProvider)(Ce,{}),De=Object(ve.FirebaseAuthProvider)(Ce),Te=function(){var e=Object(se.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.checkAuth();case 2:return t=e.sent,e.abrupt("return",t._lat);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.getList(t,{pagination:{page:1,perPage:1e3}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,a,r;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(630),e.t0=JSON,e.next=4,Te();case 4:return e.t1=e.sent,e.t2={token:e.t1},a=e.t0.stringify.call(e.t0,e.t2),r={method:"post",url:"https://australia-southeast1-admin-a4a00.cloudfunctions.net/getToken",headers:{Authorization:"Basic MkMzRDBFMkMtODQ3Qi00OEI4LUI1NTItOENCQTlDQkEzREQ4OjgwOEFGMDlBLTBFODgtNDU3Mi04QzJGLUUwOEIwOEE4N0RFMQ==","Content-Type":"application/json"},data:a},e.abrupt("return",t(r).then((function(e){return e.data})).catch((function(e){console.log(e)})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=n(630),Pe=n(831),_e=function(e){var t=e.selectedIds,n=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),r=Object(a.useState)(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],l=Object(ie.a)(),u=Object(oe.a)(),j=Object(le.a)(),d=(j.identity,j.loading,n(),a.useState()),b=Object(i.a)(d,2),O=b[0],f=b[1],x=a.useState(),h=Object(i.a)(x,2),m=h[0],p=h[1],g=Object(a.useState)(!1),v=Object(i.a)(g,2),y=v[0],w=v[1],k=function(){o(!1)},F=function(){var e=Object(se.a)(ce.a.mark((function e(){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,Te();case 3:n=e.sent,a=Pe.stringify([n,t,"dogs",O,m]),Me({method:"post",url:"https://7a314e3ed3bb.ngrok.io",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((function(e){w(!1),o(!1),l("Messages sent"),u("dogs"),f(null),p(null)})).catch((function(e){w(!1),l("Error: Could not reach server","warning")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(a.Fragment,{children:[Object(S.jsx)(ue.a,{label:"Text clients",onClick:function(){return o(!0)}}),Object(S.jsxs)(Oe.a,{open:s,onClose:k,children:[Object(S.jsx)(fe.a,{children:"Message Owners"}),Object(S.jsxs)(xe.a,{children:[Object(S.jsx)(me.a,{name:"Topic",fullWidth:!0,placeholder:"Topic",defaultValue:O&&O,onChange:function(e){f(e.target.value)}}),Object(S.jsx)(me.a,{name:"Message",multiline:!0,fullWidth:!0,placeholder:"Message",defaultValue:m&&m,onChange:function(e){p(e.target.value)}})]}),!1===y&&Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:k,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{label:"Send",onClick:F,children:Object(S.jsx)(ge.a,{})})]})]}),Object(S.jsx)(je.a,{})]})},Re=function(e){return Object(S.jsx)(f.a,Object(O.a)({rowsPerPageOptions:[50,100,200]},e))},Ye=function(){return Object(S.jsxs)(A.a,{label:"Sex",icon:Object(S.jsx)(ae.a,{}),children:[Object(S.jsx)(V.a,{label:"Male",value:{sex:"M"}}),Object(S.jsx)(V.a,{label:"Female",value:{sex:"F"}}),Object(S.jsx)(V.a,{label:"Desexed",value:{desexed:!0}})]})},ze=Object(X.a)((function(e){var t;return{root:(t={},Object(R.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(R.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(Z.a),Be=function(){return Object(S.jsx)(ze,{children:Object(S.jsxs)($.a,{children:[Object(S.jsx)(E.a,{source:"dog_name"}),Object(S.jsx)(Ye,{})]})})},Ae=function(e){var t=Object(F.a)((function(e){return e.breakpoints.down("sm")}));return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({aside:Object(S.jsx)(Be,{}),perPage:50,pagination:Object(S.jsx)(Re,{}),bulkActionButtons:Object(S.jsx)(_e,{})},e),{},{children:t?Object(S.jsx)(h.a,{primaryText:function(e){return e.dog_name},secondaryText:function(e){return e.Client}}):Object(S.jsxs)(T.a,{children:[Object(S.jsx)(m.a,{source:"dog_name",label:"Dog Name"}),Object(S.jsx)(L.a,{label:"Client",source:"owner",reference:"clients",children:Object(S.jsx)(m.a,{source:"name"})}),Object(S.jsx)(L.a,{label:"Breed",source:"breed",reference:"dog_breeds",children:Object(S.jsx)(m.a,{source:"name"})}),Object(S.jsx)(W.a,{source:"sex",choices:[{id:"M",name:"Male"},{id:"F",name:"Female"}]}),Object(S.jsx)(Q.a,{source:"desexed",label:"Desexed"}),Object(S.jsx)(p.a,{source:"vet_email",label:"Vet Email"}),Object(S.jsx)(m.a,{source:"vet",label:"Vet"}),Object(S.jsx)(G.a,{source:"kc_due",label:"KC Due"}),Object(S.jsx)(G.a,{source:"c3_due",label:"C3 Due"}),Object(S.jsx)(G.a,{source:"c5_due",label:"C5 Due"}),Object(S.jsx)(g.a,{})]})}))},Ve=function(e){var t=e.record;return Object(S.jsxs)("span",{children:["Dog ",t?'"'.concat(t.dog_name,'"'):""]})},Ee=function(e){return Object(S.jsx)(k.a,Object(O.a)(Object(O.a)({title:Object(S.jsx)(Ve,{})},e),{},{children:Object(S.jsxs)(U.a,{children:[Object(S.jsxs)(K.a,{label:"Dog Details",children:[Object(S.jsx)(w.a,{source:"dog_name",label:"Dog Name"}),Object(S.jsx)(z.a,{filterToQuery:function(e){return{name:e}},source:"owner",reference:"clients",children:Object(S.jsx)(q.a,{optionText:"name"})}),Object(S.jsx)(z.a,{filterToQuery:function(e){return{name:e}},source:"breed",reference:"dog_breeds",children:Object(S.jsx)(q.a,{optionValue:"id",optionText:"name"})}),Object(S.jsx)(B.a,{source:"sex",choices:[{id:"M",name:"Male"},{id:"F",name:"Female"}],label:"Sex"}),Object(S.jsx)(H.a,{source:"desexed",options:{checkedIcon:Object(S.jsx)(te.a,{})}})]}),Object(S.jsxs)(K.a,{label:"Medical Details",children:[Object(S.jsx)(w.a,{source:"vet",label:"Vet"}),Object(S.jsx)(w.a,{source:"vet_email",label:"Vet Email"}),Object(S.jsx)(J.a,{source:"kc_due",label:"KC Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c3_due",label:"C3 Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c5_due",label:"C5 Due",options:{format:"DD/MM/YYYY"}})]})]})}))},Le=function(e){return Object(S.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{children:Object(S.jsxs)(U.a,{children:[Object(S.jsxs)(K.a,{label:"Dog Details",children:[Object(S.jsx)(z.a,{filterToQuery:function(e){return{name:e}},source:"owner",reference:"clients",children:Object(S.jsx)(q.a,{optionText:"name"})}),Object(S.jsx)(w.a,{source:"dog_name",label:"Dog Name"}),Object(S.jsx)(w.a,{source:"breed",label:"Breed"}),Object(S.jsx)(B.a,{source:"sex",choices:[{id:"M",name:"Male"},{id:"F",name:"Female"}],label:"Sex"}),Object(S.jsx)(H.a,{source:"desexed",options:{checkedIcon:Object(S.jsx)(te.a,{})}})]}),Object(S.jsxs)(K.a,{label:"Medical Details",children:[Object(S.jsx)(w.a,{source:"vet",label:"Vet"}),Object(S.jsx)(w.a,{source:"vet_email",label:"Vet Email"}),Object(S.jsx)(J.a,{source:"kc_due",label:"KC Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c3_due",label:"C3 Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c5_due",label:"C5 Due",options:{format:"DD/MM/YYYY"}})]})]})}))},We=n(585),Qe=n.n(We),Ge=n(1784),Ue=function(){return Object(S.jsxs)(Z.a,{children:[Object(S.jsx)(Ge.a,{title:"Welcome to the administration"}),Object(S.jsx)($.a,{children:"Lorem ipsum sic dolor amet..."})]})},Ke=n(1031),qe=n(716),He=n(523),Je=n(55),Xe=n(1032),Ze=n.p+"static/media/notIcon.3ae80bc9.png",$e=function(e){return Object(S.jsx)(Xe.a,{data:[{message:"Kameshwaran S had shared a feedback with you.",detailPage:"/"},{message:Object(S.jsxs)("p",{children:["Kameshwaran S had shared a"," ",Object(S.jsx)("span",{style:{color:"#7ac2fa"},children:"feedback"})," with you."]}),detailPage:"/"}],icon:Ze,cardOption:function(e){return console.log(e)},viewAllbtn:{text:"see all",linkTo:"/seeAll"},markAsRead:function(e){return console.log(e)},headerBackgroundColor:"red",header:{title:"Notifications",option:{text:"View All",onClick:function(){}}}})},et=Object(C.a)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}}),tt=function(e){var t=et();return Object(S.jsxs)(He.a,Object(O.a)(Object(O.a)({},e),{},{children:[Object(S.jsx)(Je.a,{variant:"h6",color:"inherit",className:t.title,id:"react-admin-title"}),Object(S.jsx)("span",{className:t.spacer}),Object(S.jsx)($e,{})]}))},nt=n(120),at=n(525),rt=n(324),ct=n(1046),st=n(594),it=n(595),ot=n(732),lt=n(1785),ut=n(588),jt=n.n(ut),dt=n(193),bt=n.n(dt),Ot=n(714),ft=n.n(Ot),xt=n(398),ht=n.n(xt),mt=n(1033),pt=n.n(mt),gt=n(1034),vt=n.n(gt),yt=n(1035),wt=n.n(yt),kt=n(400),Ct=n.n(kt),St=n(1036),Ft=n.n(St),Dt=n(1037),Tt=n.n(Dt),It=n(1038),Nt=n.n(It),Mt=Object(C.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}));function Pt(e){var t=e.onMenuClick,n=(e.logout,Mt()),r=a.useState(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],l=a.useState(!1),u=Object(i.a)(l,2),j=u[0],b=u[1],O=a.useState(!1),f=Object(i.a)(O,2),x=f[0],h=f[1];Object(d.f)(nt.d);return Object(S.jsxs)(ct.a,{component:"nav",className:n.root,children:[Object(S.jsx)(at.a,{onClick:t,sidebarIsOpen:s}),Object(S.jsx)(rt.a,{to:"/clients",primaryText:"Clients",leftIcon:Object(S.jsx)(ft.a,{}),onClick:t,sidebarIsOpen:s},"clients"),Object(S.jsxs)(st.a,{button:!0,onClick:function(){o(!s)},children:[Object(S.jsx)(it.a,{children:Object(S.jsx)(Qe.a,{})}),Object(S.jsx)(ot.a,{primary:"Dogs"}),s?Object(S.jsx)(jt.a,{}):Object(S.jsx)(bt.a,{})]}),Object(S.jsxs)(lt.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/dogs",primaryText:"All Dogs",leftIcon:Object(S.jsx)(ht.a,{}),onClick:t,sidebarIsOpen:s},"dogs"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/dog_breeds",primaryText:"Dog breeds",leftIcon:Object(S.jsx)(ht.a,{}),onClick:t,sidebarIsOpen:s},"dog_breeds")]}),Object(S.jsxs)(st.a,{button:!0,onClick:function(){b(!j)},children:[Object(S.jsx)(it.a,{children:Object(S.jsx)(pt.a,{})}),Object(S.jsx)(ot.a,{primary:"Bookings"}),j?Object(S.jsx)(jt.a,{}):Object(S.jsx)(bt.a,{})]}),Object(S.jsxs)(lt.a,{in:j,timeout:"auto",unmountOnExit:!0,children:[Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/bookings",primaryText:"All Bookings",leftIcon:Object(S.jsx)(vt.a,{}),onClick:t,sidebarIsOpen:s},"bookings"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/bookingstoday",primaryText:"Bookings Today",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"bookingstoday"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/todaydaycare",primaryText:"Today Daycare",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"todaydaycare"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/todaygrooming",primaryText:"Today Grooming",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"todaygrooming"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/grooming",primaryText:"Grooming",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"grooming"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/services",primaryText:"Services",leftIcon:Object(S.jsx)(wt.a,{}),onClick:t,sidebarIsOpen:s},"services")]}),Object(S.jsxs)(st.a,{button:!0,onClick:function(){h(!x)},children:[Object(S.jsx)(it.a,{children:Object(S.jsx)(Ft.a,{})}),Object(S.jsx)(ot.a,{primary:"Payments"}),x?Object(S.jsx)(jt.a,{}):Object(S.jsx)(bt.a,{})]}),Object(S.jsx)(lt.a,{in:x,timeout:"auto",unmountOnExit:!0,children:Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/payments",primaryText:"All Payments",leftIcon:Object(S.jsx)(Tt.a,{}),onClick:t,sidebarIsOpen:s},"payments")}),Object(S.jsx)(rt.a,{to:"/messenger",primaryText:"Messenger",leftIcon:Object(S.jsx)(Nt.a,{}),onClick:t,sidebarIsOpen:s},"messenger")]})}var _t=function(e){return Object(S.jsx)(qe.a,Object(O.a)(Object(O.a)({},e),{},{menu:Pt,appBar:tt}))},Rt=n(804),Yt=n(517),zt=n(538),Bt=n(522),At=n(1745),Vt=function(e){var t=e.record[e.source];return"undefined"===typeof t||null===t||0===t.length?Object(S.jsx)("div",{}):Object(S.jsx)(S.Fragment,{children:t.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))})};Vt.defaultProps={addLabel:!0};var Et=Vt,Lt=n(728),Wt=n.n(Lt),Qt=n(138),Gt=n(41),Ut=function e(t){var n=t.record,a=t.source;if(e.defaultProps={filterBy:n.name},n[a]){var r=Object(Qt.a)("/clients",n[a]);return Object(S.jsx)(Gt.a,{to:r,children:n.name})}return Object(S.jsx)("span",{children:n.name})},Kt=function(e){var t=e.record,n=e.source;if(t[n]){var a=Object(Qt.a)("/services",t[n]);return Object(S.jsx)(Gt.a,{to:a,children:t.service+" "+t.category})}return Object(S.jsx)("span",{children:t.service+" "+t.category})},qt=function(e){var t=e.record,n=e.source;if(t[n]){var a=Object(Qt.a)("/dogs",t[n]);return Object(S.jsx)(Gt.a,{to:a,children:t.dogName})}if(!t[n])return Object(S.jsx)("span",{children:t.dogName})},Ht=function(e){var t=e.record;return Object(S.jsx)("span",{children:new Date(t.start).toLocaleString().split(",")[1].trim()+" - "+new Date(t.end).toLocaleString().split(",")[1].trim()})},Jt=n(173),Xt=n.n(Jt),Zt=n(630),$t=n(831),en=function(e){var t=e.selectedIds,n=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),r=Object(a.useState)(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(ie.a)(),O=Object(oe.a)(),f=Object(le.a)(),x=(f.identity,f.loading,n(),a.useState()),h=Object(i.a)(x,2),m=h[0],p=h[1],g=a.useState(),v=Object(i.a)(g,2),y=v[0],w=v[1],k=a.useState(),F=Object(i.a)(k,2),D=F[0],T=F[1],I=Object(a.useState)(!1),N=Object(i.a)(I,2),M=N[0],P=N[1],_=function(){o(!1)},R=function(){d(!1)},Y=function(){var e=Object(se.a)(ce.a.mark((function e(){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,Te();case 3:n=e.sent,a=$t.stringify([n,t,"bookings",m,y]),Zt({method:"post",url:"https://7a314e3ed3bb.ngrok.io",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((function(e){P(!1),o(!1),b("Messages sent"),O("bookings"),p(null),w(null)})).catch((function(e){P(!1),b("Error: Could not reach server","warning")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(se.a)(ce.a.mark((function e(){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,Te();case 3:n=e.sent,a=$t.stringify([n,t,D]),Zt({method:"post",url:"https://a9548241041d.ngrok.io/talk",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((function(e){P(!1),o(!1),b("Messages sent"),O("bookings"),T(null)})).catch((function(e){P(!1),b("Error: Could not reach server","warning")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(a.Fragment,{children:[1==t.length&&Object(S.jsx)(ue.a,{label:"Charge Card",onClick:function(){return d(!0)}}),Object(S.jsx)(ue.a,{label:"Text clients",onClick:function(){return o(!0)}}),Object(S.jsxs)(Oe.a,{open:j,onClose:R,children:[Object(S.jsx)(fe.a,{children:"Charge Card on File"}),Object(S.jsx)(xe.a,{children:Object(S.jsx)(me.a,{name:"Amount",fullWidth:!0,placeholder:"Amount",defaultValue:D&&D,onChange:function(e){T(e.target.value)}})}),Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:R,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{label:"Charge",onClick:z,children:Object(S.jsx)(Xt.a,{})})]})]}),Object(S.jsxs)(Oe.a,{open:s,onClose:_,children:[Object(S.jsx)(fe.a,{children:"Message Owners"}),Object(S.jsxs)(xe.a,{children:[Object(S.jsx)(me.a,{name:"Topic",fullWidth:!0,placeholder:"Topic",defaultValue:m&&m,onChange:function(e){p(e.target.value)}}),Object(S.jsx)(me.a,{name:"Message",multiline:!0,fullWidth:!0,placeholder:"Message",defaultValue:y&&y,onChange:function(e){w(e.target.value)}})]}),!1===M&&Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:_,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{label:"Send",onClick:Y,children:Object(S.jsx)(ge.a,{})})]})]}),Object(S.jsx)(je.a,{})]})},tn=function(e){return Object(S.jsx)(f.a,Object(O.a)({rowsPerPageOptions:[50,100,200]},e))},nn=function(e){return Object(S.jsxs)(Y.a,Object(O.a)(Object(O.a)({},e),{},{children:[Object(S.jsx)(J.a,{label:"Booking Date",source:"start",alwaysOn:!0}),Object(S.jsx)(Rt.a,{source:"name",placeholder:"Search client"}),Object(S.jsx)(Rt.a,{source:"dogName",placeholder:"Search dog"}),Object(S.jsx)(Yt.a,{label:"Service",source:"service_ref",reference:"services",sort:{field:"name",order:"ASC"},filterToQuery:function(e){return{service:e}},children:Object(S.jsx)(q.a,{optionText:function(e){return e.service+" "+e.category}})}),Object(S.jsx)(Rt.a,{source:"code",placeholder:"Search code"})]}))},an=Object(X.a)((function(e){var t;return{root:(t={},Object(R.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(R.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(Z.a),rn=function(){return Object(S.jsxs)(A.a,{label:"Category",icon:Object(S.jsx)(Wt.a,{}),children:[Object(S.jsx)(V.a,{label:"Daycare",value:{category:"daycare"}}),Object(S.jsx)(V.a,{label:"Grooming",value:{category:"stylist"}}),Object(S.jsx)(V.a,{label:"Coiffuriste",value:{category:"coiffuriste"}})]})},cn=function(){return Object(S.jsxs)(A.a,{label:"Status",icon:Object(S.jsx)(Wt.a,{}),children:[Object(S.jsx)(V.a,{label:"Confirmed",value:{status:"confirmed"}}),Object(S.jsx)(V.a,{label:"Modified",value:{status:"modified"}}),Object(S.jsx)(V.a,{label:"Cancelled",value:{status:"cancelled"}})]})},sn=function(){return Object(S.jsx)(an,{children:Object(S.jsxs)($.a,{children:[Object(S.jsx)(rn,{}),Object(S.jsx)(cn,{})]})})},on=function(e){var t=Object(F.a)((function(e){return e.breakpoints.down("sm")}));return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({aside:Object(S.jsx)(sn,{}),bulkActionButtons:Object(S.jsx)(en,{}),perPage:50},e),{},{pagination:Object(S.jsx)(tn,{}),filters:Object(S.jsx)(nn,{}),children:t?Object(S.jsx)(h.a,{primaryText:function(e){return e.name},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.phone}}):Object(S.jsxs)(T.a,{children:[Object(S.jsx)(Ut,{label:"Client",source:"client_ref",reference:"clients"}),Object(S.jsx)(qt,{label:"Dog Name",source:"dog_ref",reference:"dogs"}),Object(S.jsx)(Kt,{label:"Service",source:"service_ref",reference:"services"}),Object(S.jsx)(G.a,{label:"Booking Date",source:"start",options:{weekday:"long",year:"numeric",month:"long",day:"numeric"}}),Object(S.jsx)(Ht,{label:"Time"}),Object(S.jsx)(m.a,{source:"status"}),Object(S.jsx)(Et,{source:"addOns",children:Object(S.jsx)(zt.a,{children:Object(S.jsx)(Bt.a,{source:"id"})})}),Object(S.jsx)(m.a,{source:"comments"}),Object(S.jsx)(G.a,{source:"updated"}),Object(S.jsx)(m.a,{source:"code"}),Object(S.jsx)(g.a,{})]})}))},ln=n(30),un=n(232),jn=n(233),dn=n(236),bn=n(235),On=n(336),fn=n.n(On),xn=(n(631),n(86)),hn=n(431),mn=xn.Data.Selectors,pn=(xn.Filters.NumericFilter,xn.Filters.AutoCompleteFilter),gn=(xn.Filters.MultiSelectFilter,xn.Filters.SingleSelectFilter,[{key:"name",name:"Name",resizable:!0,formatter:function(e){return e.row.client_ref?Object(S.jsx)("a",{href:"#clients/"+e.row.client_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"dogName",name:"Dog",resizable:!0,formatter:function(e){return e.row.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+e.row.dog_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"service",name:"Service",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[e.value||""," ",e.row.category||""]})},filterable:!0,filterRenderer:pn},{key:"start",name:"Booking Date",resizable:!0,formatter:function(e){var t=hn(e.value,"dddd dd/mm/yyyy");return Object(S.jsx)("span",{children:t})},filterable:!0},{key:"end",name:"Time",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[hn(e.row.start,"h:mm TT")||"","-",hn(e.value,"h:mm TT")||""]})},filterable:!0},{key:"addOns",name:"AddOns",resizable:!0,formatter:function(e){return 0!==e.value.length?Object(S.jsx)(S.Fragment,{children:e.value.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})},filterable:!0},{key:"code",name:"Booking Code",resizable:!0,filterable:!0}]),vn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).onRowsSelected=function(e){a.setState({selectedIndexes:a.state.selectedIndexes.concat(e.map((function(e){return e.rowIdx})))})},a.onRowsDeselected=function(e){var t=e.map((function(e){return e.rowIdx}));a.setState({selectedIndexes:a.state.selectedIndexes.filter((function(e){return-1===t.indexOf(e)}))})},a.handleFilterChange=function(e,t){var n=Object(O.a)({},t);return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n},a.getValidFilterValues=function(e,t){return e.map((function(e){return e[t]})).filter((function(e,t,n){return t===n.indexOf(e)}))},a.getRows=function(e,t){return mn.getRows({rows:e,filters:t})},a.state={rows:[],selectedIndexes:[],filters:{}},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Date;Fe.getList("bookings",{filter:{start:hn(t,"yyyy-mm-dd")},pagination:{page:1,perPage:1e5}}).then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.getRows(this.state.rows,this.state.filters);return Object(S.jsx)("div",{style:{height:"94%"},children:Object(S.jsx)(fn.a,{columns:gn,rowGetter:function(e){return t[e]},rowsCount:t.length,onColumnResize:function(e,t){return console.log("Column ".concat(e," has been resized to ").concat(t))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{indexes:this.state.selectedIndexes}},toolbar:Object(S.jsxs)(xn.Toolbar,{enableFilter:!0,children:[1===this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})," "]}),onAddFilter:function(t){return e.setState({filters:e.handleFilterChange(t)})},onClearFilters:function(){return e.setState({filters:{}})},getValidFilterValues:function(t){return e.getValidFilterValues(e.state.rows,t)}})})}}]),n}(r.a.Component),yn=n(431),wn=xn.Data.Selectors,kn=(xn.Filters.NumericFilter,xn.Filters.AutoCompleteFilter),Cn=(xn.Filters.MultiSelectFilter,xn.Filters.SingleSelectFilter,[{key:"name",name:"Name",resizable:!0,formatter:function(e){return e.row.client_ref?Object(S.jsx)("a",{href:"#clients/"+e.row.client_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"dogName",name:"Dog",resizable:!0,formatter:function(e){return e.row.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+e.row.dog_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"service",name:"Service",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[e.value||""," ",e.row.category||""]})},filterable:!0,filterRenderer:kn},{key:"start",name:"Booking Date",resizable:!0,formatter:function(e){var t=yn(e.value,"dddd dd/mm/yyyy");return Object(S.jsx)("span",{children:t})},filterable:!0},{key:"end",name:"Time",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[yn(e.row.start,"h:mm TT")||"","-",yn(e.value,"h:mm TT")||""]})},filterable:!0},{key:"addOns",name:"AddOns",resizable:!0,formatter:function(e){return 0!==e.value.length?Object(S.jsx)(S.Fragment,{children:e.value.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})},filterable:!0},{key:"code",name:"Booking Code",resizable:!0,filterable:!0}]),Sn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).onRowsSelected=function(e){a.setState({selectedIndexes:a.state.selectedIndexes.concat(e.map((function(e){return e.rowIdx})))})},a.onRowsDeselected=function(e){var t=e.map((function(e){return e.rowIdx}));a.setState({selectedIndexes:a.state.selectedIndexes.filter((function(e){return-1===t.indexOf(e)}))})},a.handleFilterChange=function(e,t){var n=Object(O.a)({},t);return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n},a.getValidFilterValues=function(e,t){return e.map((function(e){return e[t]})).filter((function(e,t,n){return t===n.indexOf(e)}))},a.getRows=function(e,t){return wn.getRows({rows:e,filters:t})},a.state={rows:[],selectedIndexes:[],filters:{}},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Date;Fe.getList("bookings",{filter:{start:yn(t,"yyyy-mm-dd"),category:"daycare"},pagination:{page:1,perPage:1e5}}).then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.getRows(this.state.rows,this.state.filters);return Object(S.jsx)("div",{style:{height:"94%"},children:Object(S.jsx)(fn.a,{columns:Cn,rowGetter:function(e){return t[e]},rowsCount:t.length,onColumnResize:function(e,t){return console.log("Column ".concat(e," has been resized to ").concat(t))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{indexes:this.state.selectedIndexes}},toolbar:Object(S.jsxs)(xn.Toolbar,{enableFilter:!0,children:[1===this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})," "]}),onAddFilter:function(t){return e.setState({filters:e.handleFilterChange(t)})},onClearFilters:function(){return e.setState({filters:{}})},getValidFilterValues:function(t){return e.getValidFilterValues(e.state.rows,t)}})})}}]),n}(r.a.Component),Fn=n(431),Dn=xn.Data.Selectors,Tn=(xn.Filters.NumericFilter,xn.Filters.AutoCompleteFilter),In=(xn.Filters.MultiSelectFilter,xn.Filters.SingleSelectFilter,[{key:"name",name:"Name",resizable:!0,formatter:function(e){return e.row.client_ref?Object(S.jsx)("a",{href:"#clients/"+e.row.client_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"dogName",name:"Dog",resizable:!0,formatter:function(e){return e.row.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+e.row.dog_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"service",name:"Service",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[e.value||""," ",e.row.category||""]})},filterable:!0,filterRenderer:Tn},{key:"start",name:"Booking Date",resizable:!0,formatter:function(e){var t=Fn(e.value,"dddd dd/mm/yyyy");return Object(S.jsx)("span",{children:t})},filterable:!0},{key:"end",name:"Time",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[Fn(e.row.start,"h:mm TT")||"","-",Fn(e.value,"h:mm TT")||""]})},filterable:!0},{key:"addOns",name:"AddOns",resizable:!0,formatter:function(e){return 0!==e.value.length?Object(S.jsx)(S.Fragment,{children:e.value.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})},filterable:!0},{key:"code",name:"Booking Code",resizable:!0,filterable:!0}]),Nn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).onRowsSelected=function(e){a.setState({selectedIndexes:a.state.selectedIndexes.concat(e.map((function(e){return e.rowIdx})))})},a.onRowsDeselected=function(e){var t=e.map((function(e){return e.rowIdx}));a.setState({selectedIndexes:a.state.selectedIndexes.filter((function(e){return-1===t.indexOf(e)}))})},a.handleFilterChange=function(e,t){var n=Object(O.a)({},t);return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n},a.getValidFilterValues=function(e,t){return e.map((function(e){return e[t]})).filter((function(e,t,n){return t===n.indexOf(e)}))},a.getRows=function(e,t){return Dn.getRows({rows:e,filters:t})},a.state={rows:[],selectedIndexes:[],filters:{}},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Date;Fe.getList("bookings",{filter:{start:Fn(t,"yyyy-mm-dd"),category:"stylist"},pagination:{page:1,perPage:1e5}}).then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.getRows(this.state.rows,this.state.filters);return Object(S.jsx)("div",{style:{height:"94%"},children:Object(S.jsx)(fn.a,{columns:In,rowGetter:function(e){return t[e]},rowsCount:t.length,onColumnResize:function(e,t){return console.log("Column ".concat(e," has been resized to ").concat(t))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{indexes:this.state.selectedIndexes}},toolbar:Object(S.jsxs)(xn.Toolbar,{enableFilter:!0,children:[1===this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})," "]}),onAddFilter:function(t){return e.setState({filters:e.handleFilterChange(t)})},onClearFilters:function(){return e.setState({filters:{}})},getValidFilterValues:function(t){return e.getValidFilterValues(e.state.rows,t)}})})}}]),n}(r.a.Component),Mn=n(1039),Pn=n.n(Mn),_n=(n(1512),n(1513),n(1040)),Rn=n.n(_n),Yn=(n(1530),n(439),n(91)),zn=n.n(Yn),Bn=n(583),An=n.n(Bn);window.moment=zn.a;n(431);var Vn=[{name:"name",header:"Name",defaultWidth:200,render:function(e){var t=e.value,n=e.data;return n.client_ref?Object(S.jsx)("a",{href:"#clients/"+n.client_ref,children:t}):Object(S.jsx)("span",{children:t})}},{name:"dogName",header:"Dog",defaultWidth:150,render:function(e){var t=e.value,n=e.data;return n.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+n.dog_ref,children:t}):Object(S.jsx)("span",{children:t})}},{name:"service",header:"Service",defaultWidth:250,render:function(e){var t=e.value,n=e.data;return Object(S.jsxs)("span",{children:[t||""," ",n.category||""]})}},{name:"start",header:"Start",defaultWidth:250,filterEditor:Rn.a,filterEditorProps:function(e,t){return{dateFormat:"ddd DD/MM/YYYY",placeholder:1===t.index?"Bookings date is before...":"Booking date is on..."}},render:function(e){var t=e.value;e.cellProps.dateFormat;return zn()(t).format("ddd DD/MM/YYYY")}},{name:"addOns",header:"AddOns",defaultWidth:250,render:function(e){var t=e.value;return 0!==t.length?Object(S.jsx)(S.Fragment,{children:t.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})}},{name:"code",header:"Booking Code",defaultWidth:250}],En={minHeight:550},Ln=[{name:"start",operator:"eq",type:"date",value:""},{name:"service",operator:"contains",type:"string",value:""}],Wn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).state={rows:[],selected:{},filter:!1},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ie("bookings").then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(ue.a,{label:"Filters",onClick:function(){return e.setState({filter:!e.state.filter})},children:Object(S.jsx)(An.a,{})}),1===Object.keys(this.state.selected).length&&Object(S.jsx)(g.a,{basePath:"/bookings",label:"Edit",record:Object.values(this.state.selected)[0]}),1===Object.keys(this.state.selected).length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==Object.keys(this.state.selected).length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})]}),Object(S.jsx)(Pn.a,{idProperty:"id",columns:Vn,dataSource:this.state.rows,style:En,defaultFilterValue:Ln,onSelectionChange:function(t){return e.setState({selected:t.selected})},enableFiltering:this.state.filter,multiSelect:!0,checkboxColumn:!0})]})}}]),n}(r.a.Component),Qn=n(729);n(1531);function Gn(e){return Object(S.jsx)("div",{className:"conversation-search",children:Object(S.jsx)("input",{type:"search",className:"conversation-search-input",placeholder:"Search Client",onChange:function(t){return e.searchFilterFunction(t.target.value)},value:e.searchText})})}var Un=n(1041);n(1532);function Kn(e){Object(a.useEffect)((function(){Object(Un.a)(".conversation-snippet",20)}));var t=e.data,n=(t.photo,t.name),r=t.text;return Object(S.jsx)("div",{className:"conversation-list-item",onClick:function(){e.onClick({sid:e.data.sid,name:e.data.name})},children:Object(S.jsxs)("div",{className:"conversation-info",children:[Object(S.jsx)("h1",{className:"conversation-title",children:n}),Object(S.jsx)("p",{className:"conversation-snippet",children:r})]})})}n(1533);function qn(e){var t=e.title,n=e.leftItems,a=e.rightItems;return Object(S.jsxs)("div",{className:"toolbar",children:[Object(S.jsx)("div",{className:"left-items",children:n}),Object(S.jsx)("h1",{className:"toolbar-title",children:t}),Object(S.jsx)("div",{className:"right-items",children:a})]})}n(1534);function Hn(e){var t=e.icon;return Object(S.jsx)("i",{className:"toolbar-button ".concat(t)})}n(1535);var Jn=n(1536);function Xn(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(a.useState)(null),d=Object(i.a)(j,2),b=d[0],O=d[1];function f(e,t){return x.apply(this,arguments)}function x(){return(x=Object(se.a)(ce.a.mark((function t(n,a){var r,c,s,i;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(){return(s=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasNextPage){e.next=7;break}return e.next=3,t.nextPage();case 3:return n=e.sent,r=r.concat(n.items),e.next=7,c(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e){return s.apply(this,arguments)},r=[],t.next=5,Jn.Client.create(n);case 5:(i=t.sent).addListener("tokenAboutToExpire",Object(se.a)(ce.a.mark((function t(){var n,a;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("token about to expire"),t.next=3,Ne();case 3:return n=t.sent,t.next=6,Jn.Client.create(n);case 6:a=t.sent,e.setClient(a);case 8:case"end":return t.stop()}}),t)})))),i.addListener("tokenExpired",Object(se.a)(ce.a.mark((function t(){var n,a;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("token expired"),t.next=3,Ne();case 3:return n=t.sent,t.next=6,Jn.Client.create(n);case 6:a=t.sent,e.setClient(a);case 8:case"end":return t.stop()}}),t)})))),i.addListener("connectionStateChanged",function(){var t=Object(se.a)(ce.a.mark((function t(n){var s;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("connected"!==n){t.next=9;break}return t.next=3,i.getSubscribedConversations();case 3:return s=t.sent,r=s.items,t.next=7,c(s);case 7:e.setClient(i),a(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){h()}),[]);var h=function(){var e=Object(se.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:f(e.sent,function(){var e=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.getList("clients",{filter:{phone:t.channelState.friendlyName.split(":")[1]},pagination:{page:1,perPage:1}});case 2:return n=e.sent,e.abrupt("return",{name:n.data[0]?n.data[0].name:t.channelState.friendlyName.split(":")[1],text:n.data[0]?n.data[0].phone:t.channelState.friendlyName.split(":")[1],dateUpdated:t.lastMessage?t.lastMessage.dateCreated:t.dateUpdated,sid:t.sid});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:(n=e.sent).sort((function(e,t){return new Date(t.dateUpdated)-new Date(e.dateUpdated)})),c([].concat(Object(Qn.a)(r),Object(Qn.a)(n))),u(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"conversation-list",children:[Object(S.jsx)(qn,{title:"Messenger",leftItems:[Object(S.jsx)(Hn,{icon:"ion-ios-cog"},"cog")],rightItems:[Object(S.jsx)(Hn,{icon:"ion-ios-add-circle-outline"},"add")]}),Object(S.jsx)(Gn,{searchFilterFunction:function(e){var t=l.filter((function(t){var n,a;try{n=t.name.toUpperCase()}catch(s){n=null}try{a=t.phone}catch(i){a=null}var r="".concat(n," ").concat(a),c=e.toUpperCase();return r.indexOf(c)>-1}));O(e),c(t)},searchText:b}),r.map((function(t){return Object(S.jsx)(Kn,{data:t,onClick:e.setactiveConvo},t.sid)}))]})}n(1723);function Zn(e){return Object(S.jsxs)("div",{className:"compose",children:[Object(S.jsx)("input",{type:"text",className:"compose-input",placeholder:"Type a message",value:e.value,onChange:function(t){e.onChange(t.target.value)}}),Object(S.jsx)(ue.a,{onClick:function(){return e.onSend()},children:Object(S.jsx)(ge.a,{})}),e.rightItems]})}n(1724);function $n(e){var t=e.data,n=e.isMine,a=e.startsSequence,r=e.endsSequence,c=e.showTimestamp,s=zn()(t.timestamp).format("LLLL");return Object(S.jsxs)("div",{className:["message","".concat(n?"mine":""),"".concat(a?"start":""),"".concat(r?"end":"")].join(" "),children:[c&&Object(S.jsx)("div",{className:"timestamp",children:s}),Object(S.jsx)("div",{className:"bubble-container",children:Object(S.jsx)("div",{className:"bubble",title:s,children:t.message})})]})}n(1725);function ea(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(a.useState)(null),d=Object(i.a)(j,2),b=d[0],O=d[1];Object(a.useEffect)((function(){f()}),[e.activeConvo,l]);var f=function(){var t=Object(se.a)(ce.a.mark((function t(){var n,a,r;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!e.activeConvo){t.next=10;break}return t.next=4,e.client.getConversationBySid(e.activeConvo.sid);case 4:return a=t.sent,O(a),t.next=8,a.getMessages();case 8:r=t.sent,n=r.items.map((function(e){return{id:e.state.index,author:e.state.author,message:e.state.body,timestamp:e.state.timestamp}}));case 10:c(n);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.sendMessage(l);case 2:return e.next=4,b.getMessages();case 4:t=e.sent,n=t.items.map((function(e){return{id:e.state.index,author:e.state.author,message:e.state.body,timestamp:e.state.timestamp}})),u(""),c(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"message-list",children:[Object(S.jsx)(qn,{title:e.activeConvo?e.activeConvo.name:"Select a conversation",rightItems:[Object(S.jsx)(Hn,{icon:"ion-ios-information-circle-outline"},"info"),Object(S.jsx)(Hn,{icon:"ion-ios-videocam"},"video"),Object(S.jsx)(Hn,{icon:"ion-ios-call"},"phone")]}),Object(S.jsx)("div",{className:"message-list-container",children:function(){for(var e=0,t=r.length,n=[];e<t;){var a=r[e-1],c=r[e],s=r[e+1],i="pBjefCCX5JXw6QbYFu2GR7rmouw1"===c.author,o=zn()(c.timestamp),l=!0,u=!0,j=!0;if(a){var d=zn()(a.timestamp),b=zn.a.duration(o.diff(d));a.author===c.author&&b.as("hours")<1&&(l=!1),b.as("hours")<1&&(j=!1)}if(s){var O=zn()(s.timestamp),f=zn.a.duration(O.diff(o));s.author===c.author&&f.as("hours")<1&&(u=!1)}n.push(Object(S.jsx)($n,{isMine:i,startsSequence:l,endsSequence:u,showTimestamp:j,data:c},e)),e+=1}return n}()}),Object(S.jsx)(Zn,{value:l,onChange:u,onSend:x,rightItems:[Object(S.jsx)(Hn,{icon:"ion-ios-camera"},"photo"),Object(S.jsx)(Hn,{icon:"ion-ios-image"},"image"),Object(S.jsx)(Hn,{icon:"ion-ios-mic"},"audio"),Object(S.jsx)(Hn,{icon:"ion-ios-card"},"money"),Object(S.jsx)(Hn,{icon:"ion-logo-game-controller-b"},"games"),Object(S.jsx)(Hn,{icon:"ion-ios-happy"},"emoji")]})]})}n(1726);function ta(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(S.jsxs)("div",{className:"messenger",children:[Object(S.jsx)("div",{className:"scrollable sidebar",children:Object(S.jsx)(Xn,{setactiveConvo:c,setClient:u})}),Object(S.jsx)("div",{className:"scrollable content",children:Object(S.jsx)(ea,{activeConvo:r,client:l})})]})}var na=n(103);var aa=[Object(S.jsx)(ln.b,{exact:!0,path:"/bookingstoday",component:vn}),Object(S.jsx)(ln.b,{exact:!0,path:"/todaydaycare",component:Sn}),Object(S.jsx)(ln.b,{exact:!0,path:"/todaygrooming",component:Nn}),Object(S.jsx)(ln.b,{exact:!0,path:"/grooming",component:Wn}),Object(S.jsx)(ln.b,{exact:!0,path:"/messenger",component:function(){return Object(S.jsxs)(Z.a,{children:[Object(S.jsx)(na.b,{title:"Messenger"}),Object(S.jsx)(ta,{})]})}})],ra=n(83),ca=n(185),sa=n(685),ia=n(586),oa=n(19),la=n(234),ua=n(195),ja=n(684),da=function(e){var t=e.authProvider,n=e.dataProvider,a=e.history,r=Object(ra.c)({admin:la.a,router:Object(ca.b)(a)}),c=ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.a)([Object(ja.a)(n,t)].map(oa.f));case 2:case"end":return e.stop()}}),e)})),s=Object(ia.a)(),i=ra.d,o=Object(ra.e)((function(e,t){return r(t.type!==ua.g?e:void 0,t)}),{},i(Object(ra.a)(s,Object(sa.a)(a))));return s.run(c),o},ba=n(1786),Oa=n(313),fa=n(319),xa=function(e){return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({},e),{},{children:Object(S.jsxs)(Oa.a,{rowClick:"edit",children:[Object(S.jsx)(m.a,{source:"id"}),Object(S.jsx)(m.a,{source:"description"}),Object(S.jsx)(m.a,{source:"name"}),Object(S.jsx)(fa.a,{source:"amount"}),Object(S.jsx)(p.a,{source:"email"}),Object(S.jsx)(m.a,{source:"system"}),Object(S.jsx)(m.a,{source:"stripe_id"}),Object(S.jsx)(m.a,{source:"status"}),Object(S.jsx)(m.a,{source:"bookings"})]})}))},ha=(n(1727),Object(b.b)()),ma=function(){var e,t=a.useState(!1),n=Object(i.a)(t,2);n[0];return function(e){Se.getToken({vapidKey:"BGXh163BEaceHzjq8oIfgZfCnHEze0njY12K3FFlv8N0lLtNYTsKWpE0L7darB0Yiqzt2P_6VCcuHnSvo6beecs"}).then((function(t){t?(console.log("current token for client: ",t),e(!0)):(console.log("No registration token available. Request permission to generate one."),e(!1))})).catch((function(e){console.log("An error occurred while retrieving token. ",e),ke.NotificationManager.error("Notifications not enabled!","Allow notifications and refresh page",5e5,(function(){alert("callback")}))}))}(n[1]),e=function(e){ke.NotificationManager.success(e.notification.body,e.notification.title)},Se.onMessage((function(t){e(t)})),Object(S.jsx)(d.a,{store:da({authProvider:De,dataProvider:Fe,history:ha}),children:Object(S.jsxs)(ba.a,{utils:Ke.a,children:[Object(S.jsx)(ke.NotificationContainer,{}),Object(S.jsxs)(o.a,{disableTelemetry:!0,layout:_t,history:ha,customRoutes:aa,dashboard:Ue,dataProvider:Fe,authProvider:De,children:[Object(S.jsx)(l.a,{name:"clients",list:N,icon:Qe.a,create:P,to:"/clients",edit:_,options:{label:"Clients"}}),Object(S.jsx)(l.a,{name:"dogs",list:Ae,create:Le,edit:Ee}),Object(S.jsx)(l.a,{name:"dog_breeds",list:u.a}),Object(S.jsx)(l.a,{name:"bookings",list:on,edit:j.a}),Object(S.jsx)(l.a,{name:"services",list:u.a}),Object(S.jsx)(l.a,{name:"payments",list:xa})]})]})})};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ma,{})}),document.getElementById("root"))},631:function(e,t,n){}},[[1728,1,2]]]);
//# sourceMappingURL=main.11a816b0.chunk.js.map