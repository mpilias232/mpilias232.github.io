(this.webpackJsonpadmintry=this.webpackJsonpadmintry||[]).push([[0],{1089:function(e,t,n){},1537:function(e,t,n){},1538:function(e,t,n){},1539:function(e,t,n){},1540:function(e,t,n){},1541:function(e,t,n){},1634:function(e,t){},1658:function(e,t){},1696:function(e,t){},1729:function(e,t,n){},1736:function(e,t,n){},1737:function(e,t,n){},1738:function(e,t,n){},1740:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),s=n.n(c),i=(n(1089),n(50)),o=n(813),l=n(771),u=n(984),j=n(982),d=n(14),b=n(112),O=n(48),f=n(546),x=n(811),h=n(812),m=n(148),p=n(323),g=n(796),v=n(798),y=n(513),w=n(126),k=n(799),C=n(35),S=(n(991),n(2)),F=(Object(C.a)({link:{textDecoration:"none"},icon:{width:"0.5em",paddingLeft:2}}),n(408)),D=n(333),T=n.n(D),I=function(e){return Object(S.jsx)(f.a,Object(O.a)({rowsPerPageOptions:[50,100,200]},e))},N=function(e){var t=Object(F.a)((function(e){return e.breakpoints.down("sm")}));return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({perPage:50},e),{},{pagination:Object(S.jsx)(I,{}),children:t?Object(S.jsx)(h.a,{primaryText:function(e){return e.name},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.phone}}):Object(S.jsxs)(T.a,{children:[Object(S.jsx)(m.a,{source:"name"}),Object(S.jsx)(p.a,{source:"email"}),Object(S.jsx)(m.a,{source:"phone"}),Object(S.jsx)(m.a,{source:"instagram"}),Object(S.jsx)(g.a,{})]})}))},M=function(e){var t=e.record;return Object(S.jsxs)("span",{children:["Client ",t?'"'.concat(t.name,'"'):""]})},P=function(e){return Object(S.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{children:Object(S.jsxs)(y.a,{children:[Object(S.jsx)(w.a,{source:"name",label:"Name"}),Object(S.jsx)(w.a,{source:"phone",label:"Phone"}),Object(S.jsx)(w.a,{source:"email",label:"Email"}),Object(S.jsx)(w.a,{source:"instagram",label:"Instagram"})]})}))},R=function(e){return Object(S.jsx)(k.a,Object(O.a)(Object(O.a)({title:Object(S.jsx)(M,{})},e),{},{children:Object(S.jsxs)(y.a,{children:[Object(S.jsx)(w.a,{source:"name",label:"Name"}),Object(S.jsx)(w.a,{source:"phone",label:"Phone"}),Object(S.jsx)(w.a,{source:"email",label:"Email"}),Object(S.jsx)(w.a,{source:"instagram",label:"Instagram"})]})}))},_=n(239),Y=n(808),z=n(518),B=n(395),A=n(979),E=n(809),V=n(810),L=n(325),U=n(803),Q=n(321),W=n(322),G=n(983),K=n(802),q=n(804),H=n(549),J=n(516),X=n(8),Z=n(731),$=n(732),ee=n(728),te=n.n(ee),ne=n(714),ae=n.n(ne),re=n(20),ce=n.n(re),se=n(65),ie=n(99),oe=n(566),le=n(690),ue=n(58),je=n(505),de=n(196),be=n.n(de),Oe=n(792),fe=n(793),xe=n(794),he=n(795),me=n(1743),pe=n(105),ge=n.n(pe),ve=n(727),ye=n(585),we=n.n(ye),ke=(n(1741),n(341)),Ce={apiKey:"AIzaSyAUqOhdFbfRiCRqSzxKpYeTppBGsHfAAug",authDomain:"admin-a4a00.firebaseapp.com",databaseURL:"https://admin-a4a00-default-rtdb.firebaseio.com",projectId:"admin-a4a00",storageBucket:"admin-a4a00.appspot.com",messagingSenderId:"328849622350",appId:"1:328849622350:web:cf2cd21a20f108e7aeca1f",measurementId:"G-YKBC2Q28P1"};we.a.initializeApp(Ce);var Se=we.a.messaging(),Fe=Object(ve.FirebaseDataProvider)(Ce,{}),De=Object(ve.FirebaseAuthProvider)(Ce),Te=function(){var e=Object(se.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.checkAuth();case 2:return t=e.sent,e.abrupt("return",t._lat);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.getList(t,{pagination:{page:1,perPage:1e4}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,a,r,c;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(432),e.next=3,Te();case 3:return a=e.sent,r=JSON.stringify({token:a}),c={method:"post",url:"https://australia-southeast1-admin-a4a00.cloudfunctions.net/getToken",headers:{Authorization:"Basic MkMzRDBFMkMtODQ3Qi00OEI4LUI1NTItOENCQTlDQkEzREQ4OjgwOEFGMDlBLTBFODgtNDU3Mi04QzJGLUUwOEIwOEE4N0RFMQ==","Content-Type":"application/json"},data:r},e.abrupt("return",t(c).then((function(e){return e.data})).catch((function(e){console.log(e)})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=n(432),Pe=n(832),Re=function(e){var t=e.selectedIds,n=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),r=Object(a.useState)(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],l=Object(ie.a)(),u=Object(oe.a)(),j=Object(le.a)(),d=(j.identity,j.loading,n(),a.useState()),b=Object(i.a)(d,2),O=b[0],f=b[1],x=a.useState(),h=Object(i.a)(x,2),m=h[0],p=h[1],g=Object(a.useState)(!1),v=Object(i.a)(g,2),y=v[0],w=v[1],k=function(){o(!1)},F=function(){var e=Object(se.a)(ce.a.mark((function e(){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,Te();case 3:n=e.sent,a=Pe.stringify([n,t,"dogs",O,m]),Me({method:"post",url:"https://7a314e3ed3bb.ngrok.io",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((function(e){w(!1),o(!1),l("Messages sent"),u("dogs"),f(null),p(null)})).catch((function(e){w(!1),l("Error: Could not reach server","warning")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(a.Fragment,{children:[Object(S.jsx)(ue.a,{label:"Text clients",onClick:function(){return o(!0)}}),Object(S.jsxs)(Oe.a,{open:s,onClose:k,children:[Object(S.jsx)(fe.a,{children:"Message Owners"}),Object(S.jsxs)(xe.a,{children:[Object(S.jsx)(me.a,{name:"Topic",fullWidth:!0,placeholder:"Topic",defaultValue:O&&O,onChange:function(e){f(e.target.value)}}),Object(S.jsx)(me.a,{name:"Message",multiline:!0,fullWidth:!0,placeholder:"Message",defaultValue:m&&m,onChange:function(e){p(e.target.value)}})]}),!1===y&&Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:k,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{label:"Send",onClick:F,children:Object(S.jsx)(ge.a,{})})]})]}),Object(S.jsx)(je.a,{})]})},_e=function(e){return Object(S.jsx)(f.a,Object(O.a)({rowsPerPageOptions:[50,100,200]},e))},Ye=function(){return Object(S.jsxs)(A.a,{label:"Sex",icon:Object(S.jsx)(ae.a,{}),children:[Object(S.jsx)(E.a,{label:"Male",value:{sex:"M"}}),Object(S.jsx)(E.a,{label:"Female",value:{sex:"F"}}),Object(S.jsx)(E.a,{label:"Desexed",value:{desexed:!0}})]})},ze=Object(X.a)((function(e){var t;return{root:(t={},Object(_.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(_.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(Z.a),Be=function(){return Object(S.jsx)(ze,{children:Object(S.jsxs)($.a,{children:[Object(S.jsx)(V.a,{source:"dog_name"}),Object(S.jsx)(Ye,{})]})})},Ae=function(e){var t=Object(F.a)((function(e){return e.breakpoints.down("sm")}));return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({aside:Object(S.jsx)(Be,{}),perPage:50,pagination:Object(S.jsx)(_e,{}),bulkActionButtons:Object(S.jsx)(Re,{})},e),{},{children:t?Object(S.jsx)(h.a,{primaryText:function(e){return e.dog_name},secondaryText:function(e){return e.Client}}):Object(S.jsxs)(T.a,{children:[Object(S.jsx)(m.a,{source:"dog_name",label:"Dog Name"}),Object(S.jsx)(L.a,{label:"Client",source:"owner",reference:"clients",children:Object(S.jsx)(m.a,{source:"name"})}),Object(S.jsx)(L.a,{label:"Breed",source:"breed",reference:"dog_breeds",children:Object(S.jsx)(m.a,{source:"name"})}),Object(S.jsx)(U.a,{source:"sex",choices:[{id:"M",name:"Male"},{id:"F",name:"Female"}]}),Object(S.jsx)(Q.a,{source:"desexed",label:"Desexed"}),Object(S.jsx)(p.a,{source:"vet_email",label:"Vet Email"}),Object(S.jsx)(m.a,{source:"vet",label:"Vet"}),Object(S.jsx)(W.a,{source:"kc_due",label:"KC Due"}),Object(S.jsx)(W.a,{source:"c3_due",label:"C3 Due"}),Object(S.jsx)(W.a,{source:"c5_due",label:"C5 Due"}),Object(S.jsx)(g.a,{})]})}))},Ee=function(e){var t=e.record;return Object(S.jsxs)("span",{children:["Dog ",t?'"'.concat(t.dog_name,'"'):""]})},Ve=function(e){return Object(S.jsx)(k.a,Object(O.a)(Object(O.a)({title:Object(S.jsx)(Ee,{})},e),{},{children:Object(S.jsxs)(G.a,{children:[Object(S.jsxs)(K.a,{label:"Dog Details",children:[Object(S.jsx)(w.a,{source:"dog_name",label:"Dog Name"}),Object(S.jsx)(z.a,{filterToQuery:function(e){return{name:e}},source:"owner",reference:"clients",children:Object(S.jsx)(q.a,{optionText:"name"})}),Object(S.jsx)(z.a,{filterToQuery:function(e){return{name:e}},source:"breed",reference:"dog_breeds",children:Object(S.jsx)(q.a,{optionValue:"id",optionText:"name"})}),Object(S.jsx)(B.a,{source:"sex",choices:[{id:"M",name:"Male"},{id:"F",name:"Female"}],label:"Sex"}),Object(S.jsx)(H.a,{source:"desexed",options:{checkedIcon:Object(S.jsx)(te.a,{})}})]}),Object(S.jsxs)(K.a,{label:"Medical Details",children:[Object(S.jsx)(w.a,{source:"vet",label:"Vet"}),Object(S.jsx)(w.a,{source:"vet_email",label:"Vet Email"}),Object(S.jsx)(J.a,{source:"kc_due",label:"KC Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c3_due",label:"C3 Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c5_due",label:"C5 Due",options:{format:"DD/MM/YYYY"}})]})]})}))},Le=function(e){return Object(S.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{children:Object(S.jsxs)(G.a,{children:[Object(S.jsxs)(K.a,{label:"Dog Details",children:[Object(S.jsx)(z.a,{filterToQuery:function(e){return{name:e}},source:"owner",reference:"clients",children:Object(S.jsx)(q.a,{optionText:"name"})}),Object(S.jsx)(w.a,{source:"dog_name",label:"Dog Name"}),Object(S.jsx)(w.a,{source:"breed",label:"Breed"}),Object(S.jsx)(B.a,{source:"sex",choices:[{id:"M",name:"Male"},{id:"F",name:"Female"}],label:"Sex"}),Object(S.jsx)(H.a,{source:"desexed",options:{checkedIcon:Object(S.jsx)(te.a,{})}})]}),Object(S.jsxs)(K.a,{label:"Medical Details",children:[Object(S.jsx)(w.a,{source:"vet",label:"Vet"}),Object(S.jsx)(w.a,{source:"vet_email",label:"Vet Email"}),Object(S.jsx)(J.a,{source:"kc_due",label:"KC Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c3_due",label:"C3 Due",options:{format:"DD/MM/YYYY"}}),Object(S.jsx)(J.a,{source:"c5_due",label:"C5 Due",options:{format:"DD/MM/YYYY"}})]})]})}))},Ue=n(586),Qe=n.n(Ue),We=n(1796),Ge=function(){return Object(S.jsxs)(Z.a,{children:[Object(S.jsx)(We.a,{title:"Welcome to the administration"}),Object(S.jsx)($.a,{children:"Lorem ipsum sic dolor amet..."})]})},Ke=n(1032),qe=n(717),He=n(525),Je=n(56),Xe=n(1033),Ze=n.p+"static/media/notIcon.3ae80bc9.png",$e=function(e){return Object(S.jsx)(Xe.a,{data:[{message:"Kameshwaran S had shared a feedback with you.",detailPage:"/"},{message:Object(S.jsxs)("p",{children:["Kameshwaran S had shared a"," ",Object(S.jsx)("span",{style:{color:"#7ac2fa"},children:"feedback"})," with you."]}),detailPage:"/"}],icon:Ze,cardOption:function(e){return console.log(e)},viewAllbtn:{text:"see all",linkTo:"/seeAll"},markAsRead:function(e){return console.log(e)},headerBackgroundColor:"red",header:{title:"Notifications",option:{text:"View All",onClick:function(){}}}})},et=Object(C.a)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}}),tt=function(e){var t=et();return Object(S.jsxs)(He.a,Object(O.a)(Object(O.a)({},e),{},{children:[Object(S.jsx)(Je.a,{variant:"h6",color:"inherit",className:t.title,id:"react-admin-title"}),Object(S.jsx)("span",{className:t.spacer}),Object(S.jsx)($e,{})]}))},nt=n(122),at=n(527),rt=n(329),ct=n(1053),st=n(595),it=n(596),ot=n(733),lt=n(1797),ut=n(589),jt=n.n(ut),dt=n(194),bt=n.n(dt),Ot=n(715),ft=n.n(Ot),xt=n(405),ht=n.n(xt),mt=n(1034),pt=n.n(mt),gt=n(1035),vt=n.n(gt),yt=n(1036),wt=n.n(yt),kt=n(406),Ct=n.n(kt),St=n(1037),Ft=n.n(St),Dt=n(1038),Tt=n.n(Dt),It=n(1039),Nt=n.n(It),Mt=Object(C.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}));function Pt(e){var t=e.onMenuClick,n=(e.logout,Mt()),r=a.useState(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],l=a.useState(!1),u=Object(i.a)(l,2),j=u[0],b=u[1],O=a.useState(!1),f=Object(i.a)(O,2),x=f[0],h=f[1];Object(d.f)(nt.d);return Object(S.jsxs)(ct.a,{component:"nav",className:n.root,children:[Object(S.jsx)(at.a,{onClick:t,sidebarIsOpen:s}),Object(S.jsx)(rt.a,{to:"/clients",primaryText:"Clients",leftIcon:Object(S.jsx)(ft.a,{}),onClick:t,sidebarIsOpen:s},"clients"),Object(S.jsxs)(st.a,{button:!0,onClick:function(){o(!s)},children:[Object(S.jsx)(it.a,{children:Object(S.jsx)(Qe.a,{})}),Object(S.jsx)(ot.a,{primary:"Dogs"}),s?Object(S.jsx)(jt.a,{}):Object(S.jsx)(bt.a,{})]}),Object(S.jsxs)(lt.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/dogs",primaryText:"All Dogs",leftIcon:Object(S.jsx)(ht.a,{}),onClick:t,sidebarIsOpen:s},"dogs"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/dog_breeds",primaryText:"Dog breeds",leftIcon:Object(S.jsx)(ht.a,{}),onClick:t,sidebarIsOpen:s},"dog_breeds")]}),Object(S.jsxs)(st.a,{button:!0,onClick:function(){b(!j)},children:[Object(S.jsx)(it.a,{children:Object(S.jsx)(pt.a,{})}),Object(S.jsx)(ot.a,{primary:"Bookings"}),j?Object(S.jsx)(jt.a,{}):Object(S.jsx)(bt.a,{})]}),Object(S.jsxs)(lt.a,{in:j,timeout:"auto",unmountOnExit:!0,children:[Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/bookings",primaryText:"All Bookings",leftIcon:Object(S.jsx)(vt.a,{}),onClick:t,sidebarIsOpen:s},"bookings"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/bookingstoday",primaryText:"Bookings Today",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"bookingstoday"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/todaydaycare",primaryText:"Today Daycare",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"todaydaycare"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/todaygrooming",primaryText:"Today Grooming",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"todaygrooming"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/grooming",primaryText:"Grooming",leftIcon:Object(S.jsx)(Ct.a,{}),onClick:t,sidebarIsOpen:s},"grooming"),Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/services",primaryText:"Services",leftIcon:Object(S.jsx)(wt.a,{}),onClick:t,sidebarIsOpen:s},"services")]}),Object(S.jsxs)(st.a,{button:!0,onClick:function(){h(!x)},children:[Object(S.jsx)(it.a,{children:Object(S.jsx)(Ft.a,{})}),Object(S.jsx)(ot.a,{primary:"Payments"}),x?Object(S.jsx)(jt.a,{}):Object(S.jsx)(bt.a,{})]}),Object(S.jsx)(lt.a,{in:x,timeout:"auto",unmountOnExit:!0,children:Object(S.jsx)(rt.a,{className:n.nested,disablePadding:!0,to:"/payments",primaryText:"All Payments",leftIcon:Object(S.jsx)(Tt.a,{}),onClick:t,sidebarIsOpen:s},"payments")}),Object(S.jsx)(rt.a,{to:"/messenger",primaryText:"Messenger",leftIcon:Object(S.jsx)(Nt.a,{}),onClick:t,sidebarIsOpen:s},"messenger")]})}var Rt=function(e){return Object(S.jsx)(qe.a,Object(O.a)(Object(O.a)({},e),{},{menu:Pt,appBar:tt}))},_t=n(805),Yt=n(519),zt=n(540),Bt=n(524),At=n(1757),Et=function(e){var t=e.record[e.source];return"undefined"===typeof t||null===t||0===t.length?Object(S.jsx)("div",{}):Object(S.jsx)(S.Fragment,{children:t.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))})};Et.defaultProps={addLabel:!0};var Vt=Et,Lt=n(729),Ut=n.n(Lt),Qt=n(139),Wt=n(41),Gt=function e(t){var n=t.record,a=t.source;if(e.defaultProps={filterBy:n.name},n[a]){var r=Object(Qt.a)("/clients",n[a]);return Object(S.jsx)(Wt.a,{to:r,children:n.name})}return Object(S.jsx)("span",{children:n.name})},Kt=function(e){var t=e.record,n=e.source;if(t[n]){var a=Object(Qt.a)("/services",t[n]);return Object(S.jsx)(Wt.a,{to:a,children:t.service+" "+t.category})}return Object(S.jsx)("span",{children:t.service+" "+t.category})},qt=function(e){var t=e.record,n=e.source;if(t[n]){var a=Object(Qt.a)("/dogs",t[n]);return Object(S.jsx)(Wt.a,{to:a,children:t.dogName})}if(!t[n])return Object(S.jsx)("span",{children:t.dogName})},Ht=function(e){var t=e.record;return Object(S.jsx)("span",{children:new Date(t.start).toLocaleString().split(",")[1].trim()+" - "+new Date(t.end).toLocaleString().split(",")[1].trim()})},Jt=n(174),Xt=n.n(Jt),Zt=n(432),$t=n(832),en=function(e){var t=e.selectedIds,n=Object(C.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),r=Object(a.useState)(!1),c=Object(i.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(ie.a)(),O=Object(oe.a)(),f=Object(le.a)(),x=(f.identity,f.loading,n(),a.useState()),h=Object(i.a)(x,2),m=h[0],p=h[1],g=a.useState(),v=Object(i.a)(g,2),y=v[0],w=v[1],k=a.useState(),F=Object(i.a)(k,2),D=F[0],T=F[1],I=Object(a.useState)(!1),N=Object(i.a)(I,2),M=N[0],P=N[1],R=function(){o(!1)},_=function(){d(!1)},Y=function(){var e=Object(se.a)(ce.a.mark((function e(){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,Te();case 3:n=e.sent,a=$t.stringify([n,t,"bookings",m,y]),Zt({method:"post",url:"https://7a314e3ed3bb.ngrok.io",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((function(e){P(!1),o(!1),b("Messages sent"),O("bookings"),p(null),w(null)})).catch((function(e){P(!1),b("Error: Could not reach server","warning")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(se.a)(ce.a.mark((function e(){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,Te();case 3:n=e.sent,a=$t.stringify([n,t,D]),Zt({method:"post",url:"https://a9548241041d.ngrok.io/talk",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then((function(e){P(!1),o(!1),b("Messages sent"),O("bookings"),T(null)})).catch((function(e){P(!1),b("Error: Could not reach server","warning")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(a.Fragment,{children:[1==t.length&&Object(S.jsx)(ue.a,{label:"Charge Card",onClick:function(){return d(!0)}}),Object(S.jsx)(ue.a,{label:"Text clients",onClick:function(){return o(!0)}}),Object(S.jsxs)(Oe.a,{open:j,onClose:_,children:[Object(S.jsx)(fe.a,{children:"Charge Card on File"}),Object(S.jsx)(xe.a,{children:Object(S.jsx)(me.a,{name:"Amount",fullWidth:!0,placeholder:"Amount",defaultValue:D&&D,onChange:function(e){T(e.target.value)}})}),Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:_,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{label:"Charge",onClick:z,children:Object(S.jsx)(Xt.a,{})})]})]}),Object(S.jsxs)(Oe.a,{open:s,onClose:R,children:[Object(S.jsx)(fe.a,{children:"Message Owners"}),Object(S.jsxs)(xe.a,{children:[Object(S.jsx)(me.a,{name:"Topic",fullWidth:!0,placeholder:"Topic",defaultValue:m&&m,onChange:function(e){p(e.target.value)}}),Object(S.jsx)(me.a,{name:"Message",multiline:!0,fullWidth:!0,placeholder:"Message",defaultValue:y&&y,onChange:function(e){w(e.target.value)}})]}),!1===M&&Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:R,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{label:"Send",onClick:Y,children:Object(S.jsx)(ge.a,{})})]})]}),Object(S.jsx)(je.a,{})]})},tn=function(e){return Object(S.jsx)(f.a,Object(O.a)({rowsPerPageOptions:[50,100,200]},e))},nn=function(e){return Object(S.jsxs)(Y.a,Object(O.a)(Object(O.a)({},e),{},{children:[Object(S.jsx)(J.a,{label:"Booking Date",source:"start",alwaysOn:!0}),Object(S.jsx)(_t.a,{source:"name",placeholder:"Search client"}),Object(S.jsx)(_t.a,{source:"dogName",placeholder:"Search dog"}),Object(S.jsx)(Yt.a,{label:"Service",source:"service_ref",reference:"services",sort:{field:"name",order:"ASC"},filterToQuery:function(e){return{service:e}},children:Object(S.jsx)(q.a,{optionText:function(e){return e.service+" "+e.category}})}),Object(S.jsx)(_t.a,{source:"code",placeholder:"Search code"})]}))},an=Object(X.a)((function(e){var t;return{root:(t={},Object(_.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(_.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(Z.a),rn=function(){return Object(S.jsxs)(A.a,{label:"Category",icon:Object(S.jsx)(Ut.a,{}),children:[Object(S.jsx)(E.a,{label:"Daycare",value:{category:"daycare"}}),Object(S.jsx)(E.a,{label:"Grooming",value:{category:"stylist"}}),Object(S.jsx)(E.a,{label:"Coiffuriste",value:{category:"coiffuriste"}})]})},cn=function(){return Object(S.jsxs)(A.a,{label:"Status",icon:Object(S.jsx)(Ut.a,{}),children:[Object(S.jsx)(E.a,{label:"Confirmed",value:{status:"confirmed"}}),Object(S.jsx)(E.a,{label:"Modified",value:{status:"modified"}}),Object(S.jsx)(E.a,{label:"Cancelled",value:{status:"cancelled"}})]})},sn=function(){return Object(S.jsx)(an,{children:Object(S.jsxs)($.a,{children:[Object(S.jsx)(rn,{}),Object(S.jsx)(cn,{})]})})},on=function(e){var t=Object(F.a)((function(e){return e.breakpoints.down("sm")}));return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({aside:Object(S.jsx)(sn,{}),bulkActionButtons:Object(S.jsx)(en,{}),perPage:50},e),{},{pagination:Object(S.jsx)(tn,{}),filters:Object(S.jsx)(nn,{}),children:t?Object(S.jsx)(h.a,{primaryText:function(e){return e.name},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.phone}}):Object(S.jsxs)(T.a,{children:[Object(S.jsx)(Gt,{label:"Client",source:"client_ref",reference:"clients"}),Object(S.jsx)(qt,{label:"Dog Name",source:"dog_ref",reference:"dogs"}),Object(S.jsx)(Kt,{label:"Service",source:"service_ref",reference:"services"}),Object(S.jsx)(W.a,{label:"Booking Date",source:"start",options:{weekday:"long",year:"numeric",month:"long",day:"numeric"}}),Object(S.jsx)(Ht,{label:"Time"}),Object(S.jsx)(m.a,{source:"status"}),Object(S.jsx)(Vt,{source:"addOns",children:Object(S.jsx)(zt.a,{children:Object(S.jsx)(Bt.a,{source:"id"})})}),Object(S.jsx)(m.a,{source:"comments"}),Object(S.jsx)(W.a,{source:"updated"}),Object(S.jsx)(m.a,{source:"code"}),Object(S.jsx)(g.a,{})]})}))},ln=n(30),un=n(234),jn=n(235),dn=n(238),bn=n(237),On=n(342),fn=n.n(On),xn=(n(632),n(87)),hn=n(433),mn=xn.Data.Selectors,pn=(xn.Filters.NumericFilter,xn.Filters.AutoCompleteFilter),gn=(xn.Filters.MultiSelectFilter,xn.Filters.SingleSelectFilter,[{key:"name",name:"Name",resizable:!0,formatter:function(e){return e.row.client_ref?Object(S.jsx)("a",{href:"#clients/"+e.row.client_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"dogName",name:"Dog",resizable:!0,formatter:function(e){return e.row.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+e.row.dog_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"service",name:"Service",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[e.value||""," ",e.row.category||""]})},filterable:!0,filterRenderer:pn},{key:"start",name:"Booking Date",resizable:!0,formatter:function(e){var t=hn(e.value,"dddd dd/mm/yyyy");return Object(S.jsx)("span",{children:t})},filterable:!0},{key:"end",name:"Time",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[hn(e.row.start,"h:mm TT")||"","-",hn(e.value,"h:mm TT")||""]})},filterable:!0},{key:"addOns",name:"AddOns",resizable:!0,formatter:function(e){return 0!==e.value.length?Object(S.jsx)(S.Fragment,{children:e.value.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})},filterable:!0},{key:"code",name:"Booking Code",resizable:!0,filterable:!0}]),vn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).onRowsSelected=function(e){a.setState({selectedIndexes:a.state.selectedIndexes.concat(e.map((function(e){return e.rowIdx})))})},a.onRowsDeselected=function(e){var t=e.map((function(e){return e.rowIdx}));a.setState({selectedIndexes:a.state.selectedIndexes.filter((function(e){return-1===t.indexOf(e)}))})},a.handleFilterChange=function(e,t){var n=Object(O.a)({},t);return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n},a.getValidFilterValues=function(e,t){return e.map((function(e){return e[t]})).filter((function(e,t,n){return t===n.indexOf(e)}))},a.getRows=function(e,t){return mn.getRows({rows:e,filters:t})},a.state={rows:[],selectedIndexes:[],filters:{}},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Date;Fe.getList("bookings",{filter:{start:hn(t,"yyyy-mm-dd")},pagination:{page:1,perPage:1e5}}).then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.getRows(this.state.rows,this.state.filters);return Object(S.jsx)("div",{style:{height:"94%"},children:Object(S.jsx)(fn.a,{columns:gn,rowGetter:function(e){return t[e]},rowsCount:t.length,onColumnResize:function(e,t){return console.log("Column ".concat(e," has been resized to ").concat(t))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{indexes:this.state.selectedIndexes}},toolbar:Object(S.jsxs)(xn.Toolbar,{enableFilter:!0,children:[1===this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})," "]}),onAddFilter:function(t){return e.setState({filters:e.handleFilterChange(t)})},onClearFilters:function(){return e.setState({filters:{}})},getValidFilterValues:function(t){return e.getValidFilterValues(e.state.rows,t)}})})}}]),n}(r.a.Component),yn=n(433),wn=xn.Data.Selectors,kn=(xn.Filters.NumericFilter,xn.Filters.AutoCompleteFilter),Cn=(xn.Filters.MultiSelectFilter,xn.Filters.SingleSelectFilter,[{key:"name",name:"Name",resizable:!0,formatter:function(e){return e.row.client_ref?Object(S.jsx)("a",{href:"#clients/"+e.row.client_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"dogName",name:"Dog",resizable:!0,formatter:function(e){return e.row.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+e.row.dog_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"service",name:"Service",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[e.value||""," ",e.row.category||""]})},filterable:!0,filterRenderer:kn},{key:"start",name:"Booking Date",resizable:!0,formatter:function(e){var t=yn(e.value,"dddd dd/mm/yyyy");return Object(S.jsx)("span",{children:t})},filterable:!0},{key:"end",name:"Time",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[yn(e.row.start,"h:mm TT")||"","-",yn(e.value,"h:mm TT")||""]})},filterable:!0},{key:"addOns",name:"AddOns",resizable:!0,formatter:function(e){return 0!==e.value.length?Object(S.jsx)(S.Fragment,{children:e.value.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})},filterable:!0},{key:"code",name:"Booking Code",resizable:!0,filterable:!0}]),Sn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).onRowsSelected=function(e){a.setState({selectedIndexes:a.state.selectedIndexes.concat(e.map((function(e){return e.rowIdx})))})},a.onRowsDeselected=function(e){var t=e.map((function(e){return e.rowIdx}));a.setState({selectedIndexes:a.state.selectedIndexes.filter((function(e){return-1===t.indexOf(e)}))})},a.handleFilterChange=function(e,t){var n=Object(O.a)({},t);return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n},a.getValidFilterValues=function(e,t){return e.map((function(e){return e[t]})).filter((function(e,t,n){return t===n.indexOf(e)}))},a.getRows=function(e,t){return wn.getRows({rows:e,filters:t})},a.state={rows:[],selectedIndexes:[],filters:{}},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Date;Fe.getList("bookings",{filter:{start:yn(t,"yyyy-mm-dd"),category:"daycare"},pagination:{page:1,perPage:1e5}}).then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.getRows(this.state.rows,this.state.filters);return Object(S.jsx)("div",{style:{height:"94%"},children:Object(S.jsx)(fn.a,{columns:Cn,rowGetter:function(e){return t[e]},rowsCount:t.length,onColumnResize:function(e,t){return console.log("Column ".concat(e," has been resized to ").concat(t))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{indexes:this.state.selectedIndexes}},toolbar:Object(S.jsxs)(xn.Toolbar,{enableFilter:!0,children:[1===this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})," "]}),onAddFilter:function(t){return e.setState({filters:e.handleFilterChange(t)})},onClearFilters:function(){return e.setState({filters:{}})},getValidFilterValues:function(t){return e.getValidFilterValues(e.state.rows,t)}})})}}]),n}(r.a.Component),Fn=n(433),Dn=xn.Data.Selectors,Tn=(xn.Filters.NumericFilter,xn.Filters.AutoCompleteFilter),In=(xn.Filters.MultiSelectFilter,xn.Filters.SingleSelectFilter,[{key:"name",name:"Name",resizable:!0,formatter:function(e){return e.row.client_ref?Object(S.jsx)("a",{href:"#clients/"+e.row.client_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"dogName",name:"Dog",resizable:!0,formatter:function(e){return e.row.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+e.row.dog_ref,children:e.value}):Object(S.jsx)("span",{children:e.value})},filterable:!0},{key:"service",name:"Service",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[e.value||""," ",e.row.category||""]})},filterable:!0,filterRenderer:Tn},{key:"start",name:"Booking Date",resizable:!0,formatter:function(e){var t=Fn(e.value,"dddd dd/mm/yyyy");return Object(S.jsx)("span",{children:t})},filterable:!0},{key:"end",name:"Time",resizable:!0,formatter:function(e){return Object(S.jsxs)("span",{children:[Fn(e.row.start,"h:mm TT")||"","-",Fn(e.value,"h:mm TT")||""]})},filterable:!0},{key:"addOns",name:"AddOns",resizable:!0,formatter:function(e){return 0!==e.value.length?Object(S.jsx)(S.Fragment,{children:e.value.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})},filterable:!0},{key:"code",name:"Booking Code",resizable:!0,filterable:!0}]),Nn=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).onRowsSelected=function(e){a.setState({selectedIndexes:a.state.selectedIndexes.concat(e.map((function(e){return e.rowIdx})))})},a.onRowsDeselected=function(e){var t=e.map((function(e){return e.rowIdx}));a.setState({selectedIndexes:a.state.selectedIndexes.filter((function(e){return-1===t.indexOf(e)}))})},a.handleFilterChange=function(e,t){var n=Object(O.a)({},t);return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n},a.getValidFilterValues=function(e,t){return e.map((function(e){return e[t]})).filter((function(e,t,n){return t===n.indexOf(e)}))},a.getRows=function(e,t){return Dn.getRows({rows:e,filters:t})},a.state={rows:[],selectedIndexes:[],filters:{}},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Date;Fe.getList("bookings",{filter:{start:Fn(t,"yyyy-mm-dd"),category:"stylist"},pagination:{page:1,perPage:1e5}}).then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.getRows(this.state.rows,this.state.filters);return Object(S.jsx)("div",{style:{height:"94%"},children:Object(S.jsx)(fn.a,{columns:In,rowGetter:function(e){return t[e]},rowsCount:t.length,onColumnResize:function(e,t){return console.log("Column ".concat(e," has been resized to ").concat(t))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{indexes:this.state.selectedIndexes}},toolbar:Object(S.jsxs)(xn.Toolbar,{enableFilter:!0,children:[1===this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==this.state.selectedIndexes.length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})," "]}),onAddFilter:function(t){return e.setState({filters:e.handleFilterChange(t)})},onClearFilters:function(){return e.setState({filters:{}})},getValidFilterValues:function(t){return e.getValidFilterValues(e.state.rows,t)}})})}}]),n}(r.a.Component),Mn=n(1040),Pn=n.n(Mn),Rn=(n(1518),n(1519),n(1041)),_n=n.n(Rn),Yn=(n(1536),n(441),n(91)),zn=n.n(Yn),Bn=n(584),An=n.n(Bn);window.moment=zn.a;n(433);var En=[{name:"name",header:"Name",defaultWidth:200,render:function(e){var t=e.value,n=e.data;return n.client_ref?Object(S.jsx)("a",{href:"#clients/"+n.client_ref,children:t}):Object(S.jsx)("span",{children:t})}},{name:"dogName",header:"Dog",defaultWidth:150,render:function(e){var t=e.value,n=e.data;return n.dog_ref?Object(S.jsx)("a",{href:"#dogs/"+n.dog_ref,children:t}):Object(S.jsx)("span",{children:t})}},{name:"service",header:"Service",defaultWidth:250,render:function(e){var t=e.value,n=e.data;return Object(S.jsxs)("span",{children:[t||""," ",n.category||""]})}},{name:"start",header:"Start",defaultWidth:250,filterEditor:_n.a,filterEditorProps:function(e,t){return{dateFormat:"ddd DD/MM/YYYY",placeholder:1===t.index?"Bookings date is before...":"Booking date is on..."}},render:function(e){var t=e.value;e.cellProps.dateFormat;return zn()(t).format("ddd DD/MM/YYYY")}},{name:"addOns",header:"AddOns",defaultWidth:250,render:function(e){var t=e.value;return 0!==t.length?Object(S.jsx)(S.Fragment,{children:t.map((function(e){return Object(S.jsx)(At.a,{color:"secondary",label:e},e)}))}):Object(S.jsx)("span",{})}},{name:"code",header:"Booking Code",defaultWidth:250}],Vn={minHeight:550},Ln=[{name:"start",operator:"eq",type:"date",value:""},{name:"service",operator:"contains",type:"string",value:""}],Un=function(e){Object(dn.a)(n,e);var t=Object(bn.a)(n);function n(e){var a;return Object(un.a)(this,n),(a=t.call(this,e)).state={rows:[],selected:{},filter:!1},a}return Object(jn.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ie("bookings").then((function(t){var n=t.data;e.setState({rows:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(ue.a,{label:"Filters",onClick:function(){return e.setState({filter:!e.state.filter})},children:Object(S.jsx)(An.a,{})}),1===Object.keys(this.state.selected).length&&Object(S.jsx)(g.a,{basePath:"/bookings",label:"Edit",record:Object.values(this.state.selected)[0]}),1===Object.keys(this.state.selected).length&&Object(S.jsx)(ue.a,{label:"Charge card",children:Object(S.jsx)(Xt.a,{})}),0!==Object.keys(this.state.selected).length&&Object(S.jsx)(ue.a,{label:"Message Owners",children:Object(S.jsx)(ge.a,{})})]}),Object(S.jsx)(Pn.a,{idProperty:"id",columns:En,dataSource:this.state.rows,style:Vn,defaultFilterValue:Ln,onSelectionChange:function(t){return e.setState({selected:t.selected})},enableFiltering:this.state.filter,multiSelect:!0,checkboxColumn:!0})]})}}]),n}(r.a.Component),Qn=n(730);n(1537);function Wn(e){return Object(S.jsx)("div",{className:"conversation-search",children:Object(S.jsx)("input",{type:"search",className:"conversation-search-input",placeholder:"Search Client",onChange:function(t){return e.searchFilterFunction(t.target.value)},value:e.searchText})})}var Gn=n(1042);n(1538);function Kn(e){Object(a.useEffect)((function(){Object(Gn.a)(".conversation-snippet",20)}));var t=e.data,n=(t.photo,t.name),r=t.text;return Object(S.jsx)("div",{className:"conversation-list-item",onClick:function(){e.onClick({sid:e.data.sid,name:e.data.name})},children:Object(S.jsxs)("div",{className:"conversation-info",children:[Object(S.jsx)("h1",{className:"conversation-title",children:n}),Object(S.jsx)("p",{className:"conversation-snippet",children:r})]})})}n(1539);function qn(e){var t=e.title,n=e.leftItems,a=e.rightItems;return Object(S.jsxs)("div",{className:"toolbar",children:[Object(S.jsx)("div",{className:"left-items",children:n}),Object(S.jsx)("h1",{className:"toolbar-title",children:t}),Object(S.jsx)("div",{className:"right-items",children:a})]})}n(1540);function Hn(e){var t=e.icon;return Object(S.jsx)("i",{className:"toolbar-button ".concat(t)})}var Jn=n(1043),Xn=n.n(Jn),Zn=n(1048),$n=Object(C.a)((function(e){return{root:{width:"100%",height:500,maxWidth:300,backgroundColor:e.palette.background.paper}}}));function ea(e){var t=$n(),n=Object(a.useState)([]),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),O=b[0],f=b[1],x=Object(a.useState)(""),h=Object(i.a)(x,2),m=h[0],p=h[1];Object(a.useEffect)(Object(se.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie("clients");case 2:t=e.sent,f(t.total),s(t.data),j(t.data);case 6:case"end":return e.stop()}}),e)}))),[]);var g=function(t){var n=e.activeConvos.filter((function(e){return e.text===t.phone}));n.length>0?(e.setActiveConvo({sid:n[0].sid,name:n[0].name}),e.open(!e.visible)):console.log("not exists")};return Object(S.jsx)(a.Fragment,{children:Object(S.jsxs)(Oe.a,{open:e.visible,children:[Object(S.jsx)(fe.a,{children:"Create new Conversation"}),Object(S.jsx)(xe.a,{children:Object(S.jsxs)("div",{className:t.root,children:[Object(S.jsx)(Wn,{searchText:m,searchFilterFunction:function(e){var t=u.filter((function(t){var n;try{n=t.name.toUpperCase()}catch(c){n=null}var a="".concat(n),r=e.toUpperCase();return a.indexOf(r)>-1}));p(e),s(t),f(t.length)}}),Object(S.jsx)(Zn.a,{height:400,width:300,itemSize:46,itemCount:O,children:function(e){var t=e.index,n=e.style;return Object(S.jsx)(st.a,{onClick:Object(se.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(c[t]));case 1:case"end":return e.stop()}}),e)}))),button:!0,style:n,children:Object(S.jsx)(ot.a,{primary:c[t].name})},t)}})]})}),Object(S.jsx)(he.a,{children:Object(S.jsx)(ue.a,{label:"Cancel",onClick:function(){return e.open(!e.visible)},children:Object(S.jsx)(be.a,{})})})]})})}n(1541);var ta=n(1542);function na(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(a.useState)(null),d=Object(i.a)(j,2),b=d[0],O=d[1],f=Object(a.useState)(!1),x=Object(i.a)(f,2),h=x[0],m=x[1];function p(e,t){return g.apply(this,arguments)}function g(){return(g=Object(se.a)(ce.a.mark((function t(n,a){var r,c,s,i;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(){return(s=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasNextPage){e.next=7;break}return e.next=3,t.nextPage();case 3:return n=e.sent,r=r.concat(n.items),e.next=7,c(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e){return s.apply(this,arguments)},r=[],t.next=5,ta.Client.create(n);case 5:(i=t.sent).addListener("tokenAboutToExpire",Object(se.a)(ce.a.mark((function t(){var n;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("token about to expire"),t.next=3,Ne();case 3:n=t.sent,e.client.updateToken(n),e.setClient(i),console.log("client's token updated");case 7:case"end":return t.stop()}}),t)})))),i.addListener("tokenExpired",Object(se.a)(ce.a.mark((function t(){var n,a;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("token expired"),t.next=3,Ne();case 3:return n=t.sent,t.next=6,ta.Client.create(n);case 6:a=t.sent,e.setClient(a);case 8:case"end":return t.stop()}}),t)})))),i.addListener("connectionStateChanged",function(){var t=Object(se.a)(ce.a.mark((function t(n){var s;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("connected"!==n){t.next=9;break}return t.next=3,i.getSubscribedConversations();case 3:return s=t.sent,r=s.items,t.next=7,c(s);case 7:e.setClient(i),a(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){v()}),[]);var v=function(){var e=Object(se.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:p(e.sent,function(){var e=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(se.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.getList("clients",{filter:{phone:t.channelState.friendlyName.split(":")[1]},pagination:{page:1,perPage:1}});case 2:return n=e.sent,e.abrupt("return",{name:n.data[0]?n.data[0].name:t.channelState.friendlyName.split(":")[1],text:n.data[0]?n.data[0].phone:t.channelState.friendlyName.split(":")[1],dateUpdated:t.lastMessage?t.lastMessage.dateCreated:t.dateUpdated,sid:t.sid});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:(n=e.sent).sort((function(e,t){return new Date(t.dateUpdated)-new Date(e.dateUpdated)})),c([].concat(Object(Qn.a)(r),Object(Qn.a)(n))),u(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"conversation-list",children:[Object(S.jsx)(qn,{title:"Messenger",leftItems:[Object(S.jsx)(Hn,{icon:"ion-ios-cog"},"cog")],rightItems:[Object(S.jsx)(ue.a,{onClick:function(){return m(!h)},children:Object(S.jsx)(Xn.a,{})}),Object(S.jsx)(Hn,{icon:"ion-ios-add-circle-outline"},"add")]}),Object(S.jsx)(Wn,{searchFilterFunction:function(e){var t=l.filter((function(t){var n,a;try{n=t.name.toUpperCase()}catch(s){n=null}try{a=t.phone}catch(i){a=null}var r="".concat(n," ").concat(a),c=e.toUpperCase();return r.indexOf(c)>-1}));O(e),c(t)},searchText:b}),r.map((function(t){return Object(S.jsx)(Kn,{data:t,onClick:e.setactiveConvo},t.sid)})),Object(S.jsx)(ea,{visible:h,open:m,activeConvos:r,setActiveConvo:e.setactiveConvo})]})}var aa=n(1044),ra=n(1046),ca=n.n(ra),sa=(n(1729),n(1045)),ia=n.n(sa),oa=function(e){return Object(S.jsx)(a.Fragment,{children:Object(S.jsxs)(Oe.a,{open:e.open,children:[Object(S.jsx)(fe.a,{children:"Upload Pictures"}),Object(S.jsx)(xe.a,{children:Object(S.jsx)(ia.a,{withIcon:!0,buttonText:"Choose images",onChange:e.onDrop,imgExtension:[".jpg",".jpeg",".png"],withPreview:!0})}),Object(S.jsxs)(he.a,{children:[Object(S.jsx)(ue.a,{label:"Cancel",onClick:e.onCancel,children:Object(S.jsx)(be.a,{})}),Object(S.jsx)(ue.a,{onClick:function(){e.onPicSend(),e.onCancel()},label:"Send",children:Object(S.jsx)(ge.a,{})})]})]})})};function la(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(S.jsxs)("div",{className:"compose",children:[Object(S.jsx)("input",{type:"text",className:"compose-input",placeholder:"Type a message",value:e.value,onChange:function(t){e.onChange(t.target.value)},spellcheck:!0}),e.value?Object(S.jsx)(ue.a,{onClick:function(){return e.onSend()},children:Object(S.jsx)(ge.a,{})}):Object(S.jsx)(ue.a,{onClick:function(){return c(!r)},children:Object(S.jsx)(ca.a,{})}),Object(S.jsx)(oa,{open:r,onCancel:function(){return c(!r)},onDrop:e.onDrop,onPicSend:e.onPicSend}),e.rightItems]})}var ua=n(1047),ja=n.n(ua);n(1735),n(1736);function da(e){var t=e.data,n=e.isMine,a=e.startsSequence,r=e.endsSequence,c=e.showTimestamp,s=new RegExp("^https://bit.ly/"),i=zn()(t.timestamp).format("LLLL");return Object(S.jsxs)("div",{className:["message","".concat(n?"mine":""),"".concat(a?"start":""),"".concat(r?"end":"")].join(" "),children:[c&&Object(S.jsx)("div",{className:"timestamp",children:i}),Object(S.jsx)("div",{className:"bubble-container",children:Object(S.jsx)("div",{className:"bubble",title:i,children:s.test(t.message)?Object(S.jsx)(ja.a,{thumbnailWidth:"150px",thumbnailHeight:"150px",images:[{src:t.message}]}):t.message})})]})}var ba=n(432),Oa=function(){var e=Object(se.a)(ce.a.mark((function e(t,n){var a,r,c,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){return t(a.result)},a.onerrror=n,a.readAsDataURL(e)}))},e.next=3,a(n);case 3:return r=e.sent,c=JSON.stringify({token:t,image:r.replace("data:","").replace(/^.*;base64,/,"")}),s={method:"post",url:"https://australia-southeast1-admin-a4a00.cloudfunctions.net/adminPicUploader",headers:{Authorization:"Basic ODU2NzZCNUEtOEE5MS00NzYwLUE4MTctODQ2MUIyQ0I3MTI0OjZCQ0FGQUY5LUVFQ0YtNDRBNi04QTBBLTg3RjFDQUYxQTQxNg==","Content-Type":"application/json"},data:c},e.abrupt("return",ba(s).then((function(e){return e.data})).catch((function(e){return e})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n(1737);function fa(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(a.useState)(null),d=Object(i.a)(j,2),b=d[0],O=d[1],f=Object(a.useRef)(null),x=Object(a.useState)(null),h=Object(i.a)(x,2),m=h[0],p=h[1],g=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,n,a,r,c;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:t=e.sent,n=Object(aa.a)(m),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=15;break}return r=a.value,e.next=10,Oa(t,r);case 10:return c=e.sent,e.next=13,y(c);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){!function(){var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[r]);var v=Object(a.useCallback)(Object(se.a)(ce.a.mark((function t(){var n,a,r;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!e.activeConvo){t.next=11;break}return t.next=4,e.client.getConversationBySid(e.activeConvo.sid);case 4:return 0===(a=t.sent)._events.messageAdded.length&&a.addListener("messageAdded",v),O(a),t.next=9,a.getMessages();case 9:r=t.sent,n=r.items.map((function(e){return{id:e.state.index,author:e.state.author,message:e.state.body,timestamp:e.state.timestamp}}));case 11:c(n);case 12:case"end":return t.stop()}}),t)}))),[e.activeConvo,e.client]);Object(a.useEffect)((function(){return v(),function(){b&&b.removeListener("messageAdded",v)}}),[b,v,e.activeConvo,e.client]);var y=function(){var e=Object(se.a)(ce.a.mark((function e(t){var n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.sendMessage(t||l);case 2:return e.next=4,b.getMessages();case 4:n=e.sent,a=n.items.map((function(e){return{id:e.state.index,author:e.state.author,message:e.state.body,timestamp:e.state.timestamp}})),u(""),c(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"message-list",children:[Object(S.jsx)(qn,{title:e.activeConvo?e.activeConvo.name:"Select a conversation",rightItems:[Object(S.jsx)(Hn,{icon:"ion-ios-information-circle-outline"},"info"),Object(S.jsx)(Hn,{icon:"ion-ios-videocam"},"video"),Object(S.jsx)(Hn,{icon:"ion-ios-call"},"phone")]}),Object(S.jsxs)("div",{className:"message-list-container",children:[function(){for(var e=0,t=r.length,n=[];e<t;){var a=r[e-1],c=r[e],s=r[e+1],i="pBjefCCX5JXw6QbYFu2GR7rmouw1"===c.author,o=zn()(c.timestamp),l=!0,u=!0,j=!0;if(a){var d=zn()(a.timestamp),b=zn.a.duration(o.diff(d));a.author===c.author&&b.as("hours")<1&&(l=!1),b.as("hours")<1&&(j=!1)}if(s){var O=zn()(s.timestamp),f=zn.a.duration(O.diff(o));s.author===c.author&&f.as("hours")<1&&(u=!1)}n.push(Object(S.jsx)(da,{isMine:i,startsSequence:l,endsSequence:u,showTimestamp:j,data:c},e)),e+=1}return n}(),Object(S.jsx)("div",{ref:f})]}),Object(S.jsx)(la,{value:l,onChange:u,onSend:y,onPicSend:g,onDrop:p,rightItems:[Object(S.jsx)(Hn,{icon:"ion-ios-camera"},"photo"),Object(S.jsx)(Hn,{icon:"ion-ios-image"},"image"),Object(S.jsx)(Hn,{icon:"ion-ios-mic"},"audio"),Object(S.jsx)(Hn,{icon:"ion-ios-card"},"money"),Object(S.jsx)(Hn,{icon:"ion-logo-game-controller-b"},"games"),Object(S.jsx)(Hn,{icon:"ion-ios-happy"},"emoji")]})]})}n(1738);function xa(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(S.jsxs)("div",{className:"messenger",children:[Object(S.jsx)("div",{className:"scrollable sidebar",children:Object(S.jsx)(na,{setactiveConvo:c,setClient:u,client:l})}),Object(S.jsx)("div",{className:"scrollable content",children:Object(S.jsx)(fa,{activeConvo:r,client:l})})]})}var ha=n(104);var ma=[Object(S.jsx)(ln.b,{exact:!0,path:"/bookingstoday",component:vn}),Object(S.jsx)(ln.b,{exact:!0,path:"/todaydaycare",component:Sn}),Object(S.jsx)(ln.b,{exact:!0,path:"/todaygrooming",component:Nn}),Object(S.jsx)(ln.b,{exact:!0,path:"/grooming",component:Un}),Object(S.jsx)(ln.b,{exact:!0,path:"/messenger",component:function(){return Object(S.jsxs)(Z.a,{children:[Object(S.jsx)(ha.b,{title:"Messenger"}),Object(S.jsx)(xa,{})]})}})],pa=n(85),ga=n(186),va=n(686),ya=n(587),wa=n(19),ka=n(236),Ca=n(197),Sa=n(685),Fa=function(e){var t=e.authProvider,n=e.dataProvider,a=e.history,r=Object(pa.c)({admin:ka.a,router:Object(ga.b)(a)}),c=ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(wa.a)([Object(Sa.a)(n,t)].map(wa.f));case 2:case"end":return e.stop()}}),e)})),s=Object(ya.a)(),i=pa.d,o=Object(pa.e)((function(e,t){return r(t.type!==Ca.g?e:void 0,t)}),{},i(Object(pa.a)(s,Object(va.a)(a))));return s.run(c),o},Da=n(1798),Ta=n(318),Ia=n(324),Na=function(e){return Object(S.jsx)(x.a,Object(O.a)(Object(O.a)({},e),{},{children:Object(S.jsxs)(Ta.a,{rowClick:"edit",children:[Object(S.jsx)(m.a,{source:"id"}),Object(S.jsx)(m.a,{source:"description"}),Object(S.jsx)(m.a,{source:"name"}),Object(S.jsx)(Ia.a,{source:"amount"}),Object(S.jsx)(p.a,{source:"email"}),Object(S.jsx)(m.a,{source:"system"}),Object(S.jsx)(m.a,{source:"stripe_id"}),Object(S.jsx)(m.a,{source:"status"}),Object(S.jsx)(m.a,{source:"bookings"})]})}))},Ma=(n(1739),Object(b.b)()),Pa=function(){var e,t=a.useState(!1),n=Object(i.a)(t,2);n[0];return function(e){Se.getToken({vapidKey:"BGXh163BEaceHzjq8oIfgZfCnHEze0njY12K3FFlv8N0lLtNYTsKWpE0L7darB0Yiqzt2P_6VCcuHnSvo6beecs"}).then((function(t){t?(console.log("current token for client: ",t),e(!0)):(console.log("No registration token available. Request permission to generate one."),e(!1))})).catch((function(e){console.log("An error occurred while retrieving token. ",e),ke.NotificationManager.error("Notifications not enabled!","Allow notifications and refresh page",5e5,(function(){alert("callback")}))}))}(n[1]),e=function(e){ke.NotificationManager.success(e.notification.body,e.notification.title)},Se.onMessage((function(t){e(t)})),Object(S.jsx)(d.a,{store:Fa({authProvider:De,dataProvider:Fe,history:Ma}),children:Object(S.jsxs)(Da.a,{utils:Ke.a,children:[Object(S.jsx)(ke.NotificationContainer,{}),Object(S.jsxs)(o.a,{disableTelemetry:!0,layout:Rt,history:Ma,customRoutes:ma,dashboard:Ge,dataProvider:Fe,authProvider:De,children:[Object(S.jsx)(l.a,{name:"clients",list:N,icon:Qe.a,create:P,to:"/clients",edit:R,options:{label:"Clients"}}),Object(S.jsx)(l.a,{name:"dogs",list:Ae,create:Le,edit:Ve}),Object(S.jsx)(l.a,{name:"dog_breeds",list:u.a}),Object(S.jsx)(l.a,{name:"bookings",list:on,edit:j.a}),Object(S.jsx)(l.a,{name:"services",list:u.a}),Object(S.jsx)(l.a,{name:"payments",list:Na})]})]})})};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(Pa,{})}),document.getElementById("root"))},632:function(e,t,n){}},[[1740,1,2]]]);
//# sourceMappingURL=main.b46dee4f.chunk.js.map